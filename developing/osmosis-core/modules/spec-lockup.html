<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lockup | Osmosis Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" type="text/css" href="https://cloud.typography.com/7420256/6416592/css/fonts.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,500,700&amp;display=swap">
    <link rel="icon" type="image/png" href="/img/favicondocs.png">
    <script>window.onload = function() {
        requestAnimationFrame(function() {
          if (location.hash) {
            const element = document.getElementById(location.hash.slice(1))

            if (element) {
              element.scrollIntoView()
            }
          }
        })
      }</script>
    <meta name="description" content="Osmosis - The Cosmos Interchain AMM">
    <meta property="og:image" content="/img/osmosis-tile.png">
    
    <link rel="preload" href="/assets/css/0.styles.590a6110.css" as="style"><link rel="preload" href="/assets/js/app.42af3c02.js" as="script"><link rel="preload" href="/assets/js/3.d6962d18.js" as="script"><link rel="preload" href="/assets/js/53.5955892e.js" as="script"><link rel="prefetch" href="/assets/js/10.1945bbb6.js"><link rel="prefetch" href="/assets/js/11.d3c200ea.js"><link rel="prefetch" href="/assets/js/12.e123ca65.js"><link rel="prefetch" href="/assets/js/13.077d7b42.js"><link rel="prefetch" href="/assets/js/14.2f66a5c2.js"><link rel="prefetch" href="/assets/js/15.869788f5.js"><link rel="prefetch" href="/assets/js/16.cc876432.js"><link rel="prefetch" href="/assets/js/17.634e4740.js"><link rel="prefetch" href="/assets/js/18.96d043aa.js"><link rel="prefetch" href="/assets/js/19.a64fd535.js"><link rel="prefetch" href="/assets/js/20.b210033c.js"><link rel="prefetch" href="/assets/js/21.204ab6d0.js"><link rel="prefetch" href="/assets/js/22.50d2954d.js"><link rel="prefetch" href="/assets/js/23.85a2fcc7.js"><link rel="prefetch" href="/assets/js/24.a16ae3b2.js"><link rel="prefetch" href="/assets/js/25.0314b4e0.js"><link rel="prefetch" href="/assets/js/26.2cc90529.js"><link rel="prefetch" href="/assets/js/27.1273ffcd.js"><link rel="prefetch" href="/assets/js/28.6652d041.js"><link rel="prefetch" href="/assets/js/29.5a1821ee.js"><link rel="prefetch" href="/assets/js/30.a853a619.js"><link rel="prefetch" href="/assets/js/31.4032da1a.js"><link rel="prefetch" href="/assets/js/32.91b5423d.js"><link rel="prefetch" href="/assets/js/33.951af195.js"><link rel="prefetch" href="/assets/js/34.1e9765a2.js"><link rel="prefetch" href="/assets/js/35.33545058.js"><link rel="prefetch" href="/assets/js/36.44019876.js"><link rel="prefetch" href="/assets/js/37.d57af8db.js"><link rel="prefetch" href="/assets/js/38.e6e3110d.js"><link rel="prefetch" href="/assets/js/39.ce5b7351.js"><link rel="prefetch" href="/assets/js/4.a8a8a8e7.js"><link rel="prefetch" href="/assets/js/40.ec6f279b.js"><link rel="prefetch" href="/assets/js/41.ebe30ac4.js"><link rel="prefetch" href="/assets/js/42.a7dffe46.js"><link rel="prefetch" href="/assets/js/43.24aa8f60.js"><link rel="prefetch" href="/assets/js/44.fab40a75.js"><link rel="prefetch" href="/assets/js/45.e791df5b.js"><link rel="prefetch" href="/assets/js/46.6217f704.js"><link rel="prefetch" href="/assets/js/47.1e718e66.js"><link rel="prefetch" href="/assets/js/48.fda98548.js"><link rel="prefetch" href="/assets/js/49.d25eb339.js"><link rel="prefetch" href="/assets/js/5.d830d969.js"><link rel="prefetch" href="/assets/js/50.e437b290.js"><link rel="prefetch" href="/assets/js/51.5221bd7e.js"><link rel="prefetch" href="/assets/js/52.45ef2633.js"><link rel="prefetch" href="/assets/js/54.8fd67c29.js"><link rel="prefetch" href="/assets/js/55.5bf8ec66.js"><link rel="prefetch" href="/assets/js/56.93c17e22.js"><link rel="prefetch" href="/assets/js/57.fb025a12.js"><link rel="prefetch" href="/assets/js/58.6c12c4e9.js"><link rel="prefetch" href="/assets/js/59.4dcc35bb.js"><link rel="prefetch" href="/assets/js/6.13683f30.js"><link rel="prefetch" href="/assets/js/60.2742f788.js"><link rel="prefetch" href="/assets/js/61.b42e405f.js"><link rel="prefetch" href="/assets/js/62.0369b253.js"><link rel="prefetch" href="/assets/js/63.d096902a.js"><link rel="prefetch" href="/assets/js/64.2a9b8110.js"><link rel="prefetch" href="/assets/js/65.9164633c.js"><link rel="prefetch" href="/assets/js/66.108e4cbf.js"><link rel="prefetch" href="/assets/js/67.4611a661.js"><link rel="prefetch" href="/assets/js/68.4f4f2d00.js"><link rel="prefetch" href="/assets/js/69.00784a6c.js"><link rel="prefetch" href="/assets/js/7.6a7d4249.js"><link rel="prefetch" href="/assets/js/70.c77063ed.js"><link rel="prefetch" href="/assets/js/71.134de04e.js"><link rel="prefetch" href="/assets/js/72.9771428a.js"><link rel="prefetch" href="/assets/js/73.1b80641f.js"><link rel="prefetch" href="/assets/js/74.58905ff8.js"><link rel="prefetch" href="/assets/js/75.f958f4a6.js"><link rel="prefetch" href="/assets/js/76.bd648129.js"><link rel="prefetch" href="/assets/js/77.7d1f79e1.js"><link rel="prefetch" href="/assets/js/78.5d474c92.js"><link rel="prefetch" href="/assets/js/79.da22a167.js"><link rel="prefetch" href="/assets/js/8.ca096a90.js"><link rel="prefetch" href="/assets/js/80.9f6e54a0.js"><link rel="prefetch" href="/assets/js/81.9c6da30e.js"><link rel="prefetch" href="/assets/js/82.602232c9.js"><link rel="prefetch" href="/assets/js/83.90de2ff0.js"><link rel="prefetch" href="/assets/js/84.3ad7aa7f.js"><link rel="prefetch" href="/assets/js/85.b39a7b29.js"><link rel="prefetch" href="/assets/js/86.bf46314a.js"><link rel="prefetch" href="/assets/js/87.08d17619.js"><link rel="prefetch" href="/assets/js/88.b40ad5ba.js"><link rel="prefetch" href="/assets/js/89.a1d5bb1f.js"><link rel="prefetch" href="/assets/js/9.60a2b2ee.js"><link rel="prefetch" href="/assets/js/90.e5734bba.js"><link rel="prefetch" href="/assets/js/91.b631c63b.js"><link rel="prefetch" href="/assets/js/92.50eeeeac.js"><link rel="prefetch" href="/assets/js/93.1e80b8e5.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.66930185.js">
    <link rel="stylesheet" href="/assets/css/0.styles.590a6110.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"></div> <a href="/" class="home-link router-link-active"><img src="/img/osmosis-logo-dark.svg" alt="Osmosis Docs" class="logo"> <span class="site-name can-hide">Osmosis Docs</span></a> <a href="/" class="home-link router-link-active"><img src="/img/osmosis-logo-light.svg" alt="Osmosis Docs" class="logoDark"> <span class="site-name can-hide">Osmosis Docs</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/developing/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><a href="/infra/" class="nav-link">Infra</a></div><div class="nav-item"><a href="/validators/" class="nav-link">Validate</a></div><div class="nav-item"><a href="/integrate/" class="nav-link">Integrate</a></div><div class="nav-item"><a href="https://github.com/osmosis-labs/osmosis" target="_blank" rel="noopener noreferrer" class="nav-link external"><div class="nav-icon"><img src="/img/github.svg"></div></a></div></nav> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form></div></header> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/developing/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><a href="/infra/" class="nav-link">Infra</a></div><div class="nav-item"><a href="/validators/" class="nav-link">Validate</a></div><div class="nav-item"><a href="/integrate/" class="nav-link">Integrate</a></div><div class="nav-item"><a href="https://github.com/osmosis-labs/osmosis" target="_blank" rel="noopener noreferrer" class="nav-link external"><div class="nav-icon"><img src="/img/github.svg"></div></a></div></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building dApps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Osmosis Core</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/developing/osmosis-core/" aria-current="page" class="sidebar-link">Chain Development</a></li><li><a href="/developing/osmosis-core/build.html" class="sidebar-link">Build and Test</a></li><li><a href="/developing/osmosis-core/ide-guide.html" class="sidebar-link">Osmosis IDE Setup</a></li><li><a href="/developing/osmosis-core/performance.html" class="sidebar-link">Performance &amp; Profiling</a></li><li><a href="/developing/osmosis-core/contributing.html" class="sidebar-link">Contributing</a></li><li><a href="/developing/osmosis-core/modules/" aria-current="page" class="sidebar-link">Modules</a></li><li><a href="/developing/osmosis-core/modules/spec-epochs.html" class="sidebar-link">Epochs</a></li><li><a href="/developing/osmosis-core/modules/spec-gamm.html" class="sidebar-link">GAMM</a></li><li><a href="/developing/osmosis-core/modules/spec-gov.html" class="sidebar-link">Gov</a></li><li><a href="/developing/osmosis-core/modules/spec-lockup.html" aria-current="page" class="active sidebar-link">Lockup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#abstract" class="sidebar-link">Abstract</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#contents" class="sidebar-link">Contents</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#concepts" class="sidebar-link">Concepts</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#state" class="sidebar-link">State</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#locked-coins-management" class="sidebar-link">Locked coins management</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#period-lock" class="sidebar-link">Period Lock</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#period-lock-reference-queues" class="sidebar-link">Period lock reference queues</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#synthetic-lockup" class="sidebar-link">Synthetic Lockup</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#synthetic-lock-reference-queues" class="sidebar-link">Synthetic lock reference queues</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#messages" class="sidebar-link">Messages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#lock-tokens" class="sidebar-link">Lock Tokens</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#begin-unlock-of-all-locks" class="sidebar-link">Begin Unlock of all locks</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#begin-unlock-for-a-lock" class="sidebar-link">Begin unlock for a lock</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#events" class="sidebar-link">Events</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#handlers" class="sidebar-link">Handlers</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#endblocker" class="sidebar-link">Endblocker</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#keepers" class="sidebar-link">Keepers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#lockup-keeper" class="sidebar-link">Lockup Keeper</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#lock-admin-keeper" class="sidebar-link">Lock Admin Keeper</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#hooks" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#tokens-locked" class="sidebar-link">Tokens Locked</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#parameters" class="sidebar-link">Parameters</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#endblocker-2" class="sidebar-link">Endblocker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#withdraw-tokens-after-unlock-time-mature" class="sidebar-link">Withdraw tokens after unlock time mature</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#remove-synthetic-locks-after-removal-time-mature" class="sidebar-link">Remove synthetic locks after removal time mature</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#transactions" class="sidebar-link">Transactions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#lock-tokens-2" class="sidebar-link">lock-tokens</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#begin-unlock-by-id" class="sidebar-link">begin-unlock-by-id</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#begin-unlock-tokens" class="sidebar-link">begin-unlock-tokens</a></li></ul></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#queries" class="sidebar-link">Queries</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-beforetime" class="sidebar-link">account-locked-beforetime</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-coins" class="sidebar-link">account-locked-coins</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-longer-duration" class="sidebar-link">account-locked-longer-duration</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-longer-duration-denom" class="sidebar-link">account-locked-longer-duration-denom</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-longer-duration-not-unlocking" class="sidebar-link">account-locked-longer-duration-not-unlocking</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-pasttime" class="sidebar-link">account-locked-pasttime</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-pasttime-denom" class="sidebar-link">account-locked-pasttime-denom</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-locked-pasttime-not-unlocking" class="sidebar-link">account-locked-pasttime-not-unlocking</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-unlockable-coins" class="sidebar-link">account-unlockable-coins</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#account-unlocking-coins" class="sidebar-link">account-unlocking-coins</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#lock-by-id" class="sidebar-link">lock-by-id</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#module-balance" class="sidebar-link">module-balance</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#module-locked-amount" class="sidebar-link">module-locked-amount</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#output-all-locks" class="sidebar-link">output-all-locks</a></li><li class="sidebar-sub-header"><a href="/developing/osmosis-core/modules/spec-lockup.html#total-locked-of-denom" class="sidebar-link">total-locked-of-denom</a></li></ul></li></ul></li><li><a href="/developing/osmosis-core/modules/spec-mint.html" class="sidebar-link">Mint</a></li><li><a href="/developing/osmosis-core/modules/spec-incentives.html" class="sidebar-link">Incentives</a></li><li><a href="/developing/osmosis-core/modules/spec-pool-incentives.html" class="sidebar-link">Pool Incentives</a></li><li><a href="/developing/osmosis-core/modules/spec-superfluid.html" class="sidebar-link">Superfluid Staking</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Relaying</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Asset Info</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Key Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Osmosis Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p> <!----></section></li></ul>  <div class="sidebar_footer"></div></aside> <main class="page"> <nav id="breadcrumb" class="breadcrumb-container" data-v-684968f4><a href="/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Home</span></a><a href="/developing/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Developing in Osmosis</span></a><a href="/developing/osmosis-core/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Chain Development</span></a><a href="/developing/osmosis-core/modules/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Modules</span></a><a href="/developing/osmosis-core/modules/spec-lockup.html" aria-current="page" class="breadcrumb router-link-exact-active router-link-active" data-v-684968f4><span data-v-684968f4>Lockup</span></a></nav> <div class="theme-default-content content__default"><h1 id="lockup"><a href="#lockup" class="header-anchor">#</a> Lockup</h1> <h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>Lockup module provides an interface for users to lock tokens (also known as bonding) into the module to get incentives.</p> <p>After tokens have been added to a specific pool and turned into LP shares through the GAMM module, users can then lock these LP shares with a specific duration in order to begin earing rewards.</p> <p>To unlock these LP shares, users must trigger the unlock timer and wait for the unlock period that was set initially to be completed. After the unlock period is over, users can turn LP shares back into their respective share of tokens.</p> <p>This module provides interfaces for other modules to iterate the locks efficiently and grpc query to check the status of locked coins.</p> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ol><li><strong><a href="#concepts">Concept</a></strong></li> <li><strong><a href="#state">State</a></strong></li> <li><strong><a href="#messages">Messages</a></strong></li> <li><strong><a href="#events">Events</a></strong></li> <li><strong><a href="#keeper">Keeper</a></strong></li> <li><strong><a href="#hooks">Hooks</a></strong></li> <li><strong><a href="#queries">Queries</a></strong></li> <li><strong><a href="#transactions">Transactions</a></strong></li> <li><strong><a href="#params">Params</a></strong></li> <li><strong><a href="#endblocker">Endblocker</a></strong></li></ol> <h2 id="concepts"><a href="#concepts" class="header-anchor">#</a> Concepts</h2> <p>The purpose of <code>lockup</code> module is to provide the functionality to lock
tokens for specific period of time for LP token stakers to get
incentives.</p> <p>To unlock these LP shares, users must trigger the unlock timer and wait for the unlock period that was set initially to be completed. After the unlock period is over, users can turn LP shares back into their respective share of tokens.</p> <p>This module provides interfaces for other modules to iterate the locks efficiently and grpc query to check the status of locked coins.</p> <p>There are currently three incentivize lockup periods; <code>1 day</code> (24h), <code>1 week</code> (168h), and <code>2 weeks</code> (336h). When locking tokens in the 2 week period, the liquidity provider is effectively earning rewards for a combination of the 1 day, 1 week, and 2 week bonding periods.</p> <p>The 2 week period refers to how long it takes to unbond the LP shares. The liquidity provider can keep their LP shares bonded to the 2 week lockup period indefinitely. Unbonding is only required when the liquidity provider desires access to the underlying assets.</p> <p>If the liquidity provider begins the unbonding process for their 2 week bonded LP shares, they will earn rewards for all three bonding periods during the first day of unbonding.</p> <p>After the first day passes, they will only receive rewards for the 1 day and 1 week lockup periods. After seven days pass, they will only receive the 1 day rewards until the 2 weeks is complete and their LP shares are unlocked. The below chart is a visual example of what was just explained.</p> <br> <p style="text-align:center;"><img src="/img/bonding.png" height="300"></p> <br> <br> <h2 id="state"><a href="#state" class="header-anchor">#</a> State</h2> <h3 id="locked-coins-management"><a href="#locked-coins-management" class="header-anchor">#</a> Locked coins management</h3> <p>Locked coins are all stored in module account for <code>lockup</code> module which
is called <code>LockPool</code>. When user lock coins within <code>lockup</code> module, it's
moved from user account to <code>LockPool</code> and a record (<code>PeriodLock</code> struct)
is created.</p> <p>Once the period is over, user can withdraw it at anytime from
<code>LockPool</code>. User can withdraw by PeriodLock ID or withdraw all
<code>UnlockableCoins</code> at a time.</p> <h3 id="period-lock"><a href="#period-lock" class="header-anchor">#</a> Period Lock</h3> <p>A <code>PeriodLock</code> is a single unit of lock by period. It's a record of
locked coin at a specific time. It stores owner, duration, unlock time
and the amount of coins locked.</p> <div class="language-{.go} line-numbers-mode"><pre class="language-text"><code>type PeriodLock struct {
  ID         uint64
  Owner      sdk.AccAddress
  Duration   time.Duration
  UnlockTime time.Time
  Coins      sdk.Coins
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>All locks are stored on the KVStore as value at
<code>{KeyPrefixPeriodLock}{ID}</code> key.</p> <h3 id="period-lock-reference-queues"><a href="#period-lock-reference-queues" class="header-anchor">#</a> Period lock reference queues</h3> <p>To provide time efficient queries, several reference queues are managed
by denom, unlock time, and duration. There are two big queues to store
the lock references. (<code>a_prefix_key</code>)</p> <ol><li>Lock references that hasn't started with unlocking yet has prefix of
<code>KeyPrefixNotUnlocking</code>.</li> <li>Lock references that has started unlocking already has prefix of
<code>KeyPrefixUnlocking</code>.</li> <li>Lock references that has withdrawn, it's removed from the store.</li></ol> <p>Regardless the lock has started unlocking or not, it stores below
references. (<code>b_prefix_key</code>)</p> <ol><li><code>{KeyPrefixLockDuration}{Duration}</code></li> <li><code>{KeyPrefixAccountLockDuration}{Owner}{Duration}</code></li> <li><code>{KeyPrefixDenomLockDuration}{Denom}{Duration}</code></li> <li><code>{KeyPrefixAccountDenomLockDuration}{Owner}{Denom}{Duration}</code></li></ol> <p>If the lock is unlocking, it also stores the below referneces.</p> <ol><li><code>{KeyPrefixLockTimestamp}{LockEndTime}</code></li> <li><code>{KeyPrefixAccountLockTimestamp}{Owner}{LockEndTime}</code></li> <li><code>{KeyPrefixDenomLockTimestamp}{Denom}{LockEndTime}</code></li> <li><code>{KeyPrefixAccountDenomLockTimestamp}{Owner}{Denom}{LockEndTime}</code></li></ol> <p>For end time keys, they are converted to sortable string by using
<code>sdk.FormatTimeBytes</code> function.</p> <p><strong>Note:</strong> Additionally, for locks that hasn't started unlocking yet, it
stores accumulation store for efficient rewards distribution mechanism.</p> <p>For reference management, <code>addLockRefByKey</code> function is used a lot. Here
key is the prefix key to be used for iteration. It is combination of two
prefix keys.(<code>{a_prefix_key}{b_prefix_key}</code>)</p> <div class="language-{.go} line-numbers-mode"><pre class="language-text"><code>// addLockRefByKey make a lockID iterable with the prefix `key`
func (k Keeper) addLockRefByKey(ctx sdk.Context, key []byte, lockID uint64) error {
 store := ctx.KVStore(k.storeKey)
 lockIDBz := sdk.Uint64ToBigEndian(lockID)
 endKey := combineKeys(key, lockIDBz)
 if store.Has(endKey) {
  return fmt.Errorf(&quot;lock with same ID exist: %d&quot;, lockID)
 }
 store.Set(endKey, lockIDBz)
 return nil
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="synthetic-lockup"><a href="#synthetic-lockup" class="header-anchor">#</a> Synthetic Lockup</h3> <p>Synthetic Lockups are a concept that serve the following roles:</p> <ul><li>Add &quot;restrictions&quot; to an underlying PeriodLock, so that its bond
status must be managed by a module rather than a BeginUnlockMessage</li> <li>Allow issuing of a locked, &quot;synthetic&quot; denom type</li> <li>Allow distribution of rewards to locked synthetic denominations.</li></ul> <p>The first goal can eventually be pushed into a new data structure, as it
doesn't really relate to the synthetic component.</p> <p>This is then used for superfluid staking. (Old docs below):</p> <p>The goal of synthetic lockup is to support the querying of locks by
denom especially for delegated staking. By combining native denom and
synthetic suffix, lockup supports querying with synthetic denom with
existing denom querying functions.</p> <p>Synthetic lockup is creating virtual lockup where new denom is
combination of original denom and synthetic suffix. At the time of
synthetic lockup creation and deletion, accumulation store is also being
updated and on querier side, they can query as freely as native lockup.</p> <p>Note: The staking, distribution, slashing, superfluid module would be
refactored to use lockup module and synthetic lockup. The following
changes for synthetic lockup on native lockup change could be defined as
per use case. For now we assume this change is made on hook receiver
side which manages synthetic lockup, e.g. use cases are when user start
/ pause superfluid staking on a lockup, redelegation event, unbonding
event etc.</p> <p>External modules are managing synthetic locks to use it on their own
logic implementation. (e.g. delegated staking and superfluid staking)</p> <p>A <code>SyntheticLock</code> is a single unit of synthetic lockup. Each synthetic
lockup has reference <code>PeriodLock</code> ID, synthetic suffix (<code>Suffix</code>) and
synthetic lock's removal time (<code>EndTime</code>).</p> <div class="language-{.go} line-numbers-mode"><pre class="language-text"><code>type SyntheticLock struct {
 LockId  uint64
 Suffix  string
 EndTime time.Time
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>All synthetic locks are stored on the KVStore as value at
<code>{KeyPrefixPeriodLock}{LockID}{Suffix}</code> key.</p> <h3 id="synthetic-lock-reference-queues"><a href="#synthetic-lock-reference-queues" class="header-anchor">#</a> Synthetic lock reference queues</h3> <p>To provide time efficient queries, several reference queues are managed
by denom, unlock time, and duration.</p> <ol><li><code>{KeyPrefixDenomLockTimestamp}{SyntheticDenom}{LockEndTime}</code></li> <li><code>{KeyPrefixDenomLockDuration}{SyntheticDenom}{Duration}</code></li> <li><code>{KeyPrefixAccountDenomLockTimestamp}{Owner}{SyntheticDenom}{LockEndTime}</code></li> <li><code>{KeyPrefixAccountDenomLockDuration}{Owner}{SyntheticDenom}{Duration}</code></li></ol> <p>SyntheticDenom is expressed as <code>{Denom}{Suffix}</code>. (Note: we can change
this to <code>{Prefix}{Denom}</code> as per discussion with Dev)</p> <p>For end time keys, they are converted to sortable string by using
<code>sdk.FormatTimeBytes</code> function.</p> <p><strong>Note:</strong> To implement the auto removal of synthetic lockups that is
already finished, we manage a separate time basis queue at
<code>{KeyPrefixSyntheticLockTimestamp}{EndTime}{LockId}{Suffix}</code></p> <h2 id="messages"><a href="#messages" class="header-anchor">#</a> Messages</h2> <h3 id="lock-tokens"><a href="#lock-tokens" class="header-anchor">#</a> Lock Tokens</h3> <p><code>MsgLockTokens</code> can be submitted by any token holder via a
<code>MsgLockTokens</code> transaction.</p> <div class="language-{.go} line-numbers-mode"><pre class="language-text"><code>type MsgLockTokens struct {
 Owner    sdk.AccAddress
 Duration time.Duration
 Coins    sdk.Coins
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>State modifications:</strong></p> <ul><li>Validate <code>Owner</code> has enough tokens</li> <li>Generate new <code>PeriodLock</code> record</li> <li>Save the record inside the keeper's time basis unlock queue</li> <li>Transfer the tokens from the <code>Owner</code> to lockup <code>ModuleAccount</code>.</li></ul> <h3 id="begin-unlock-of-all-locks"><a href="#begin-unlock-of-all-locks" class="header-anchor">#</a> Begin Unlock of all locks</h3> <p>Once time is over, users can withdraw unlocked coins from lockup
<code>ModuleAccount</code>.</p> <div class="language-{.go} line-numbers-mode"><pre class="language-text"><code>type MsgBeginUnlockingAll struct {
 Owner string
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>State modifications:</strong></p> <ul><li>Fetch all unlockable <code>PeriodLock</code>s that has not started unlocking
yet</li> <li>Set <code>PeriodLock</code>'s unlock time</li> <li>Remove lock references from <code>NotUnlocking</code> queue</li> <li>Add lock references to <code>Unlocking</code> queue</li></ul> <h3 id="begin-unlock-for-a-lock"><a href="#begin-unlock-for-a-lock" class="header-anchor">#</a> Begin unlock for a lock</h3> <p>Once time is over, users can withdraw unlocked coins from lockup
<code>ModuleAccount</code>.</p> <div class="language-{.go} line-numbers-mode"><pre class="language-text"><code>type MsgBeginUnlocking struct {
 Owner string
 ID    uint64
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>State modifications:</strong></p> <ul><li>Check <code>PeriodLock</code> with <code>ID</code> specified by <code>MsgBeginUnlocking</code> is not
started unlocking yet</li> <li>Set <code>PeriodLock</code>'s unlock time</li> <li>Remove lock references from <code>NotUnlocking</code> queue</li> <li>Add lock references to <code>Unlocking</code> queue</li></ul> <p>Note: If another module needs past <code>PeriodLock</code> item, it can log the
details themselves using the hooks.</p> <h2 id="events"><a href="#events" class="header-anchor">#</a> Events</h2> <p>The lockup module emits the following events:</p> <h3 id="handlers"><a href="#handlers" class="header-anchor">#</a> Handlers</h3> <h4 id="msglocktokens"><a href="#msglocktokens" class="header-anchor">#</a> MsgLockTokens</h4> <table><thead><tr><th>Type</th> <th>Attribute Key</th> <th>Attribute Value</th></tr></thead> <tbody><tr><td>lock_tokens</td> <td>period_lock_id</td> <td>{periodLockID}</td></tr> <tr><td>lock_tokens</td> <td>owner</td> <td>{owner}</td></tr> <tr><td>lock_tokens</td> <td>amount</td> <td>{amount}</td></tr> <tr><td>lock_tokens</td> <td>duration</td> <td>{duration}</td></tr> <tr><td>lock_tokens</td> <td>unlock_time</td> <td>{unlockTime}</td></tr> <tr><td>message</td> <td>action</td> <td>lock_tokens</td></tr> <tr><td>message</td> <td>sender</td> <td>{owner}</td></tr> <tr><td>transfer</td> <td>recipient</td> <td>{moduleAccount}</td></tr> <tr><td>transfer</td> <td>sender</td> <td>{owner}</td></tr> <tr><td>transfer</td> <td>amount</td> <td>{amount}</td></tr></tbody></table> <h4 id="msgbeginunlocking"><a href="#msgbeginunlocking" class="header-anchor">#</a> MsgBeginUnlocking</h4> <table><thead><tr><th>Type</th> <th>Attribute Key</th> <th>Attribute Value</th></tr></thead> <tbody><tr><td>begin_unlock</td> <td>period_lock_id</td> <td>{periodLockID}</td></tr> <tr><td>begin_unlock</td> <td>owner</td> <td>{owner}</td></tr> <tr><td>begin_unlock</td> <td>amount</td> <td>{amount}</td></tr> <tr><td>begin_unlock</td> <td>duration</td> <td>{duration}</td></tr> <tr><td>begin_unlock</td> <td>unlock_time</td> <td>{unlockTime}</td></tr> <tr><td>message</td> <td>action</td> <td>begin_unlocking</td></tr> <tr><td>message</td> <td>sender</td> <td>{owner}</td></tr></tbody></table> <h4 id="msgbeginunlockingall"><a href="#msgbeginunlockingall" class="header-anchor">#</a> MsgBeginUnlockingAll</h4> <table><thead><tr><th>Type</th> <th>Attribute Key</th> <th>Attribute Value</th></tr></thead> <tbody><tr><td>begin_unlock_all</td> <td>owner</td> <td>{owner}</td></tr> <tr><td>begin_unlock_all</td> <td>unlocked_coins</td> <td>{unlockedCoins}</td></tr> <tr><td>begin_unlock</td> <td>period_lock_id</td> <td>{periodLockID}</td></tr> <tr><td>begin_unlock</td> <td>owner</td> <td>{owner}</td></tr> <tr><td>begin_unlock</td> <td>amount</td> <td>{amount}</td></tr> <tr><td>begin_unlock</td> <td>duration</td> <td>{duration}</td></tr> <tr><td>begin_unlock</td> <td>unlock_time</td> <td>{unlockTime}</td></tr> <tr><td>message</td> <td>action</td> <td>begin_unlocking_all</td></tr> <tr><td>message</td> <td>sender</td> <td>{owner}</td></tr></tbody></table> <h3 id="endblocker"><a href="#endblocker" class="header-anchor">#</a> Endblocker</h3> <h4 id="automatic-withdraw-when-unlock-time-mature"><a href="#automatic-withdraw-when-unlock-time-mature" class="header-anchor">#</a> Automatic withdraw when unlock time mature</h4> <table><thead><tr><th>Type</th> <th>Attribute Key</th> <th>Attribute Value</th></tr></thead> <tbody><tr><td>message</td> <td>action</td> <td>unlock_tokens</td></tr> <tr><td>message</td> <td>sender</td> <td>{owner}</td></tr> <tr><td>transfer[]</td> <td>recipient</td> <td>{owner}</td></tr> <tr><td>transfer[]</td> <td>sender</td> <td>{moduleAccount}</td></tr> <tr><td>transfer[]</td> <td>amount</td> <td>{unlockAmount}</td></tr> <tr><td>unlock[]</td> <td>period_lock_id</td> <td>{owner}</td></tr> <tr><td>unlock[]</td> <td>owner</td> <td>{lockID}</td></tr> <tr><td>unlock[]</td> <td>duration</td> <td>{lockDuration}</td></tr> <tr><td>unlock[]</td> <td>unlock_time</td> <td>{unlockTime}</td></tr> <tr><td>unlock_tokens</td> <td>owner</td> <td>{owner}</td></tr> <tr><td>unlock_tokens</td> <td>unlocked_coins</td> <td>{totalAmount}</td></tr></tbody></table> <h2 id="keepers"><a href="#keepers" class="header-anchor">#</a> Keepers</h2> <h3 id="lockup-keeper"><a href="#lockup-keeper" class="header-anchor">#</a> Lockup Keeper</h3> <p>Lockup keeper provides utility functions to store lock queues and query
locks.</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// Keeper is the interface for lockup module keeper</span>
<span class="token keyword">type</span> Keeper <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token comment">// GetModuleBalance Returns full balance of the module</span>
    <span class="token function">GetModuleBalance</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> sdk<span class="token punctuation">.</span>Coins
    <span class="token comment">// GetModuleLockedCoins Returns locked balance of the module</span>
    <span class="token function">GetModuleLockedCoins</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> sdk<span class="token punctuation">.</span>Coins
    <span class="token comment">// GetAccountUnlockableCoins Returns whole unlockable coins which are not withdrawn yet</span>
    <span class="token function">GetAccountUnlockableCoins</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">)</span> sdk<span class="token punctuation">.</span>Coins
    <span class="token comment">// GetAccountUnlockingCoins Returns whole unlocking coins</span>
    <span class="token function">GetAccountUnlockingCoins</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">)</span> sdk<span class="token punctuation">.</span>Coins
    <span class="token comment">// GetAccountLockedCoins Returns a locked coins that can't be withdrawn</span>
    <span class="token function">GetAccountLockedCoins</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">)</span> sdk<span class="token punctuation">.</span>Coins
    <span class="token comment">// GetAccountLockedPastTime Returns the total locks of an account whose unlock time is beyond timestamp</span>
    <span class="token function">GetAccountLockedPastTime</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> timestamp time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock
    <span class="token comment">// GetAccountUnlockedBeforeTime Returns the total unlocks of an account whose unlock time is before timestamp</span>
    <span class="token function">GetAccountUnlockedBeforeTime</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> timestamp time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock
    <span class="token comment">// GetAccountLockedPastTimeDenom is equal to GetAccountLockedPastTime but denom specific</span>
    <span class="token function">GetAccountLockedPastTimeDenom</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> denom <span class="token builtin">string</span><span class="token punctuation">,</span> timestamp time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock

    <span class="token comment">// GetAccountLockedLongerDuration Returns account locked with duration longer than specified</span>
    <span class="token function">GetAccountLockedLongerDuration</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> duration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock
    <span class="token comment">// GetAccountLockedLongerDurationDenom Returns account locked with duration longer than specified with specific denom</span>
    <span class="token function">GetAccountLockedLongerDurationDenom</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> denom <span class="token builtin">string</span><span class="token punctuation">,</span> duration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock
    <span class="token comment">// GetLocksPastTimeDenom Returns the locks whose unlock time is beyond timestamp</span>
    <span class="token function">GetLocksPastTimeDenom</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> denom <span class="token builtin">string</span><span class="token punctuation">,</span> timestamp time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock
    <span class="token comment">// GetLocksLongerThanDurationDenom Returns the locks whose unlock duration is longer than duration</span>
    <span class="token function">GetLocksLongerThanDurationDenom</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> addr sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> denom <span class="token builtin">string</span><span class="token punctuation">,</span> duration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock
    <span class="token comment">// GetLockByID Returns lock from lockID</span>
    <span class="token function">GetLockByID</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>types<span class="token punctuation">.</span>PeriodLock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token comment">// GetPeriodLocks Returns the period locks on pool</span>
    <span class="token function">GetPeriodLocks</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>PeriodLock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token comment">// UnlockAllUnlockableCoins Unlock all unlockable coins</span>
    <span class="token function">UnlockAllUnlockableCoins</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> account sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">)</span> <span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Coins<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token comment">// LockTokens lock tokens from an account for specified duration</span>
    <span class="token function">LockTokens</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> owner sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> coins sdk<span class="token punctuation">.</span>Coins<span class="token punctuation">,</span> duration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span>types<span class="token punctuation">.</span>PeriodLock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token comment">// AddTokensToLock locks more tokens into a lockup</span>
    <span class="token function">AddTokensToLock</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> owner sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> coins sdk<span class="token punctuation">.</span>Coins<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>types<span class="token punctuation">.</span>PeriodLock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token comment">// Lock is a utility to lock coins into module account</span>
    <span class="token function">Lock</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lock types<span class="token punctuation">.</span>PeriodLock<span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token comment">// Unlock is a utility to unlock coins from module account</span>
    <span class="token function">Unlock</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lock types<span class="token punctuation">.</span>PeriodLock<span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token function">GetSyntheticLockup</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> suffix <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>types<span class="token punctuation">.</span>SyntheticLock<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
    <span class="token function">GetAllSyntheticLockupsByLockup</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>SyntheticLock
    <span class="token function">GetAllSyntheticLockups</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>types<span class="token punctuation">.</span>SyntheticLock
    <span class="token comment">// CreateSyntheticLockup create synthetic lockup with lock id and denom suffix</span>
    <span class="token function">CreateSyntheticLockup</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> suffix <span class="token builtin">string</span><span class="token punctuation">,</span> unlockDuration time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token comment">// DeleteSyntheticLockup delete synthetic lockup with lock id and suffix</span>
    <span class="token function">DeleteSyntheticLockup</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> suffix <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token function">DeleteAllMaturedSyntheticLocks</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="lock-admin-keeper"><a href="#lock-admin-keeper" class="header-anchor">#</a> Lock Admin Keeper</h3> <p>Lockup admin keeper provides god privilege functions to remove tokens
from locks and create new locks.</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// AdminKeeper defines a god priviledge keeper functions to remove tokens from locks and create new locks</span>
<span class="token comment">// For the governance system of token pools, we want a &quot;ragequit&quot; feature</span>
<span class="token comment">// So governance changes will take 1 week to go into effect</span>
<span class="token comment">// During that time, people can choose to &quot;ragequit&quot; which means they would leave the original pool</span>
<span class="token comment">// and form a new pool with the old parameters but if they still had 2 months of lockup left,</span>
<span class="token comment">// their liquidity still needs to be 2 month lockup-ed, just in the new pool</span>
<span class="token comment">// And we need to replace their pool1 LP tokens with pool2 LP tokens with the same lock duration and end time</span>

<span class="token keyword">type</span> AdminKeeper <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    Keeper

    <span class="token comment">// this unlock previous lockID and create a new lock with newCoins with same duration and endtime</span>
    <span class="token function">Relock</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> newCoins sdk<span class="token punctuation">.</span>Coins<span class="token punctuation">)</span> <span class="token builtin">error</span>
    <span class="token comment">// this unlock without time check with an admin priviledge</span>
    <span class="token function">BreakLock</span><span class="token punctuation">(</span>sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>In this section we describe the &quot;hooks&quot; that <code>lockup</code> module provide for
other modules.</p> <h3 id="tokens-locked"><a href="#tokens-locked" class="header-anchor">#</a> Tokens Locked</h3> <p>On lock/unlock events, lockup module execute hooks for other modules to
make following actions.</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>  <span class="token function">OnTokenLocked</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> address sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> amount sdk<span class="token punctuation">.</span>Coins<span class="token punctuation">,</span> lockDuration time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> unlockTime time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span>
  <span class="token function">OnTokenUnlocked</span><span class="token punctuation">(</span>ctx sdk<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> address sdk<span class="token punctuation">.</span>AccAddress<span class="token punctuation">,</span> lockID <span class="token builtin">uint64</span><span class="token punctuation">,</span> amount sdk<span class="token punctuation">.</span>Coins<span class="token punctuation">,</span> lockDuration time<span class="token punctuation">.</span>Duration<span class="token punctuation">,</span> unlockTime time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="parameters"><a href="#parameters" class="header-anchor">#</a> Parameters</h2> <p>The lockup module contains the following parameters:</p> <table><thead><tr><th>Key</th> <th>Type</th> <th>Example</th></tr></thead> <tbody></tbody></table> <p>Note: Currently no parameters are set for <code>lockup</code> module, we will need
to move lockable durations from incentives module to lockup module.</p> <h2 id="endblocker-2"><a href="#endblocker-2" class="header-anchor">#</a> Endblocker</h2> <h3 id="withdraw-tokens-after-unlock-time-mature"><a href="#withdraw-tokens-after-unlock-time-mature" class="header-anchor">#</a> Withdraw tokens after unlock time mature</h3> <p>Once time is over, endblocker withdraw coins from matured locks and
coins are sent from lockup <code>ModuleAccount</code>.</p> <p><strong>State modifications:</strong></p> <ul><li>Fetch all unlockable <code>PeriodLock</code>s that <code>Owner</code> has not withdrawn
yet</li> <li>Remove <code>PeriodLock</code> records from the state</li> <li>Transfer the tokens from lockup <code>ModuleAccount</code> to the
<code>MsgUnlockTokens.Owner</code>.</li></ul> <h3 id="remove-synthetic-locks-after-removal-time-mature"><a href="#remove-synthetic-locks-after-removal-time-mature" class="header-anchor">#</a> Remove synthetic locks after removal time mature</h3> <p>For synthetic lockups, no coin movement is made, but lockup record and
reference queues are removed.</p> <p><strong>State modifications:</strong></p> <ul><li>Fetch all synthetic lockups that is matured</li> <li>Remove <code>SyntheticLock</code> records from the state along with reference
queues</li></ul> <h2 id="transactions"><a href="#transactions" class="header-anchor">#</a> Transactions</h2> <h3 id="lock-tokens-2"><a href="#lock-tokens-2" class="header-anchor">#</a> lock-tokens</h3> <p>Bond tokens in a LP for a set duration</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd tx lockup lock-tokens <span class="token punctuation">[</span>tokens<span class="token punctuation">]</span> --duration --from --chain-id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>To lockup <code>15.527546134174465309gamm/pool/3</code> tokens for a <code>one day</code> bonding period from <code>WALLET_NAME</code> on the osmosis mainnet:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd tx lockup lock-tokens 15527546134174465309gamm/pool/3 --duration<span class="token operator">=</span><span class="token string">&quot;24h&quot;</span> --from WALLET_NAME --chain-id osmosis-1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To lockup <code>25.527546134174465309gamm/pool/13</code> tokens for a <code>one week</code> bonding period from <code>WALLET_NAME</code> on the osmosis testnet:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd tx lockup lock-tokens 25527546134174465309gamm/pool/13 --duration<span class="token operator">=</span><span class="token string">&quot;168h&quot;</span> --from WALLET_NAME --chain-id osmo-test-4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To lockup <code>35.527546134174465309 gamm/pool/197</code> tokens for a <code>two week</code> bonding period from <code>WALLET_NAME</code> on the osmosis mainnet:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd tx lockup lock-tokens 35527546134174465309gamm/pool/197 --duration<span class="token operator">=</span><span class="token string">&quot;336h&quot;</span> --from WALLET_NAME --chain-id osmosis-1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></details> <h3 id="begin-unlock-by-id"><a href="#begin-unlock-by-id" class="header-anchor">#</a> begin-unlock-by-id</h3> <p>Begin the unbonding process for tokens given their unique lock ID</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd tx lockup begin-unlock-by-id <span class="token punctuation">[</span>id<span class="token punctuation">]</span> --from --chain-id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>To begin the unbonding time for all bonded tokens under id <code>75</code> from <code>WALLET_NAME</code> on the osmosis mainnet:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd tx lockup begin-unlock-by-id <span class="token number">75</span> --from WALLET_NAME --chain-id osmosis-1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></details> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>The ID corresponds to the unique ID given to your lockup transaction (explained more in lock-by-id section)</p></div> <h3 id="begin-unlock-tokens"><a href="#begin-unlock-tokens" class="header-anchor">#</a> begin-unlock-tokens</h3> <p>Begin unbonding process for all bonded tokens in a wallet</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd tx lockup begin-unlock-tokens --from --chain-id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>To begin unbonding time for ALL pools and ALL bonded tokens in <code>WALLET_NAME</code> on the osmosis mainnet:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd tx lockup begin-unlock-tokens --from<span class="token operator">=</span>WALLET_NAME --chain-id<span class="token operator">=</span>osmosis-1 --yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></details> <h2 id="queries"><a href="#queries" class="header-anchor">#</a> Queries</h2> <p>In this section we describe the queries required on grpc server.</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token comment">// Query defines the gRPC querier service.</span>
<span class="token keyword">service</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
    <span class="token comment">// Return full balance of the module</span>
 <span class="token keyword">rpc</span> <span class="token function">ModuleBalance</span><span class="token punctuation">(</span><span class="token class-name">ModuleBalanceRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">ModuleBalanceResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// Return locked balance of the module</span>
 <span class="token keyword">rpc</span> <span class="token function">ModuleLockedAmount</span><span class="token punctuation">(</span><span class="token class-name">ModuleLockedAmountRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">ModuleLockedAmountResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Returns unlockable coins which are not withdrawn yet</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountUnlockableCoins</span><span class="token punctuation">(</span><span class="token class-name">AccountUnlockableCoinsRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountUnlockableCoinsResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// Returns unlocking coins</span>
   <span class="token keyword">rpc</span> <span class="token function">AccountUnlockingCoins</span><span class="token punctuation">(</span><span class="token class-name">AccountUnlockingCoinsRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountUnlockingCoinsResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token comment">// Return a locked coins that can't be withdrawn</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedCoins</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedCoinsRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedCoinsResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Returns locked records of an account with unlock time beyond timestamp</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedPastTime</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedPastTimeRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedPastTimeResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// Returns locked records of an account with unlock time beyond timestamp excluding tokens started unlocking</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedPastTimeNotUnlockingOnly</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedPastTimeNotUnlockingOnlyRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedPastTimeNotUnlockingOnlyResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token comment">// Returns unlocked records with unlock time before timestamp</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountUnlockedBeforeTime</span><span class="token punctuation">(</span><span class="token class-name">AccountUnlockedBeforeTimeRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountUnlockedBeforeTimeResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Returns lock records by address, timestamp, denom</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedPastTimeDenom</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedPastTimeDenomRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedPastTimeDenomResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// Returns lock record by id</span>
 <span class="token keyword">rpc</span> <span class="token function">LockedByID</span><span class="token punctuation">(</span><span class="token class-name">LockedRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">LockedResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Returns account locked records with longer duration</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedLongerDuration</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedLongerDurationRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedLongerDurationResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// Returns account locked records with longer duration excluding tokens started unlocking</span>
   <span class="token keyword">rpc</span> <span class="token function">AccountLockedLongerDurationNotUnlockingOnly</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedLongerDurationNotUnlockingOnlyRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedLongerDurationNotUnlockingOnlyResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 <span class="token comment">// Returns account's locked records for a denom with longer duration</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedLongerDurationDenom</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedLongerDurationDenomRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedLongerDurationDenomResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// Returns account locked records with a specific duration</span>
 <span class="token keyword">rpc</span> <span class="token function">AccountLockedDuration</span><span class="token punctuation">(</span><span class="token class-name">AccountLockedDurationRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">AccountLockedDurationResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="account-locked-beforetime"><a href="#account-locked-beforetime" class="header-anchor">#</a> account-locked-beforetime</h3> <p>Query an account's unlocked records after a specified time (UNIX) has passed</p> <p>In other words, if an account unlocked all their bonded tokens the moment the query was executed, only the locks that would have completed their bond time requirement by the time the <code>TIMESTAMP</code> is reached will be returned.</p> <details class="custom-block details"><summary>Example</summary> <p>In this example, the current UNIX time is <code>1639776682</code>, 2 days from now is approx <code>1639971082</code>, and 15 days from now is approx <code>1641094282</code>.</p> <p>An account's <code>ADDRESS</code> is locked in both the <code>1 day</code> and <code>1 week</code> gamm/pool/3. To query the <code>ADDRESS</code> with a timestamp 2 days from now <code>1639971082</code>:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-beforetime ADDRESS <span class="token number">1639971082</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In this example will output the <code>1 day</code> lock but not the <code>1 week</code> lock:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;571839&quot;</span>
  coins:
  - amount: <span class="token string">&quot;15527546134174465309&quot;</span>
    denom: gamm/pool/3
  duration: 24h
  end_time: <span class="token string">&quot;2021-12-18T23:32:58.900715388Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>If querying the same <code>ADDRESS</code> with a timestamp 15 days from now <code>1641094282</code>:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-beforetime ADDRESS <span class="token number">1641094282</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In this example will output both the <code>1 day</code> and <code>1 week</code> lock:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;572027&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
- ID: <span class="token string">&quot;571839&quot;</span>
  coins:
  - amount: <span class="token string">&quot;15527546134174465309&quot;</span>
    denom: gamm/pool/3
  duration: 24h
  end_time: <span class="token string">&quot;2021-12-18T23:32:58.900715388Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></details> <h3 id="account-locked-coins"><a href="#account-locked-coins" class="header-anchor">#</a> account-locked-coins</h3> <p>Query an account's locked (bonded) LP tokens</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup account-locked-coins <span class="token punctuation">[</span>address<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-coins osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>An example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>coins:
- amount: <span class="token string">&quot;413553955105681228583&quot;</span>
  denom: gamm/pool/1
- amount: <span class="token string">&quot;32155370994266157441309&quot;</span>
  denom: gamm/pool/10
- amount: <span class="token string">&quot;220957857520769912023&quot;</span>
  denom: gamm/pool/3
- amount: <span class="token string">&quot;31648237936933949577&quot;</span>
  denom: gamm/pool/42
- amount: <span class="token string">&quot;14162624050980051053569&quot;</span>
  denom: gamm/pool/5
- amount: <span class="token string">&quot;1023186951315714985896914&quot;</span>
  denom: gamm/pool/9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>All GAMM amounts listed are 10^18. Move the decimal place to the left 18 places to get the GAMM amount listed in the GUI.</p> <p>You may also specify a --height flag to see bonded LP tokens at a specified height (note: if running a pruned node, this may result in an error)</p></div></details> <h3 id="account-locked-longer-duration"><a href="#account-locked-longer-duration" class="header-anchor">#</a> account-locked-longer-duration</h3> <p>Query an account's locked records that are greater than or equal to a specified lock duration</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup account-locked-longer-duration <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token punctuation">[</span>duration<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Here is an example of querying an <code>ADDRESS</code> for all <code>1 day</code> or greater bonding periods:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-longer-duration osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 24h
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>An example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;572027&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
- ID: <span class="token string">&quot;571839&quot;</span>
  coins:
  - amount: <span class="token string">&quot;15527546134174465309&quot;</span>
    denom: gamm/pool/3
  duration: 24h
  end_time: <span class="token string">&quot;2021-12-18T23:32:58.900715388Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></details> <h3 id="account-locked-longer-duration-denom"><a href="#account-locked-longer-duration-denom" class="header-anchor">#</a> account-locked-longer-duration-denom</h3> <p>Query an account's locked records for a denom that is locked equal to or greater than the specified duration AND match a specified denom</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup account-locked-longer-duration-denom <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token punctuation">[</span>duration<span class="token punctuation">]</span> <span class="token punctuation">[</span>denom<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Here is an example of an <code>ADDRESS</code> that is locked in both the <code>1 day</code> and <code>1 week</code> for both the gamm/pool/3 and gamm/pool/1, then queries the <code>ADDRESS</code> for all bonding periods equal to or greater than <code>1 day</code> for just the gamm/pool/3:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-longer-duration-denom osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 24h gamm/pool/3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>An example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;571839&quot;</span>
  coins:
  - amount: <span class="token string">&quot;15527546134174465309&quot;</span>
    denom: gamm/pool/3
  duration: 24h
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
- ID: <span class="token string">&quot;572027&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>As shown, the gamm/pool/3 is returned but not the gamm/pool/1 due to the denom filter.</p></details> <h3 id="account-locked-longer-duration-not-unlocking"><a href="#account-locked-longer-duration-not-unlocking" class="header-anchor">#</a> account-locked-longer-duration-not-unlocking</h3> <p>Query an account's locked records for a denom that is locked equal to or greater than the specified duration AND is not in the process of being unlocked</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup account-locked-longer-duration-not-unlocking <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token punctuation">[</span>duration<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Here is an example of an <code>ADDRESS</code> that is locked in both the <code>1 day</code> and <code>1 week</code> gamm/pool/3, begins unlocking process for the <code>1 day</code> bond, and queries the <code>ADDRESS</code> for all bonding periods equal to or greater than <code>1 day</code> that are not unbonding:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-longer-duration-not-unlocking osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 24h
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>An example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;571839&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The <code>1 day</code> bond does not show since it is in the process of unbonding.</p></details> <h3 id="account-locked-pasttime"><a href="#account-locked-pasttime" class="header-anchor">#</a> account-locked-pasttime</h3> <p>Query the locked records of an account with the unlock time beyond timestamp (UNIX)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-pasttime <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token punctuation">[</span>timestamp<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Here is an example of an account that is locked in both the <code>1 day</code> and <code>1 week</code> gamm/pool/3. In this example, the UNIX time is currently <code>1639776682</code> and queries an <code>ADDRESS</code> for UNIX time two days later from the current time (which in this example would be <code>1639971082</code>)</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-pasttime osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 <span class="token number">1639971082</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;572027&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Note that the <code>1 day</code> lock ID did not display because, if the unbonding time began counting down from the time the command was executed, the bonding period would be complete before the two day window given by the UNIX timestamp input.</p></details> <h3 id="account-locked-pasttime-denom"><a href="#account-locked-pasttime-denom" class="header-anchor">#</a> account-locked-pasttime-denom</h3> <p>Query the locked records of an account with the unlock time beyond timestamp (unix) and filter by a specific denom</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-pasttime-denom osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 <span class="token punctuation">[</span>timestamp<span class="token punctuation">]</span> <span class="token punctuation">[</span>denom<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Here is an example of an account that is locked in both the <code>1 day</code> and <code>1 week</code> gamm/pool/3 and <code>1 day</code> and <code>1 week</code> gamm/pool/1. In this example, the UNIX time is currently <code>1639776682</code> and queries an <code>ADDRESS</code> for UNIX time two days later from the current time (which in this example would be <code>1639971082</code>) and filters for gamm/pool/3</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-pasttime-denom osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 <span class="token number">1639971082</span> gamm/pool/3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;572027&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Note that the <code>1 day</code> lock ID did not display because, if the unbonding time began counting down from the time the command was executed, the bonding period would be complete before the two day window given by the UNIX timestamp input. Additionally, neither of the <code>1 day</code> or <code>1 week</code> lock IDs for gamm/pool/1 showed due to the denom filter.</p></details> <h3 id="account-locked-pasttime-not-unlocking"><a href="#account-locked-pasttime-not-unlocking" class="header-anchor">#</a> account-locked-pasttime-not-unlocking</h3> <p>Query the locked records of an account with the unlock time beyond timestamp (unix) AND is not in the process of unlocking</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup account-locked-pasttime <span class="token punctuation">[</span>address<span class="token punctuation">]</span> <span class="token punctuation">[</span>timestamp<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Here is an example of an account that is locked in both the <code>1 day</code> and <code>1 week</code> gamm/pool/3. In this example, the UNIX time is currently <code>1639776682</code> and queries an <code>ADDRESS</code> for UNIX time two days later from the current time (which in this example would be <code>1639971082</code>) AND is not unlocking:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-locked-pasttime osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259 <span class="token number">1639971082</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>locks:
- ID: <span class="token string">&quot;572027&quot;</span>
  coins:
  - amount: <span class="token string">&quot;16120691802759484268&quot;</span>
    denom: gamm/pool/3
  duration: <span class="token number">604800</span>.000006193s
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Note that the <code>1 day</code> lock ID did not display because, if the unbonding time began counting down from the time the command was executed, the bonding period would be complete before the two day window given by the UNIX timestamp input. Additionally, if ID 572027 were to begin the unlocking process, the query would have returned blank.</p></details> <h3 id="account-unlockable-coins"><a href="#account-unlockable-coins" class="header-anchor">#</a> account-unlockable-coins</h3> <p>Query an address's LP shares that have completed the unlocking period and are ready to be withdrawn</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-unlockable-coins ADDRESS
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="account-unlocking-coins"><a href="#account-unlocking-coins" class="header-anchor">#</a> account-unlocking-coins</h3> <p>Query an address's LP shares that are currently unlocking</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup account-unlocking-coins <span class="token punctuation">[</span>address<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup account-unlocking-coins osmo1xqhlshlhs5g0acqgrkafdemvf5kz4pp4c2x259
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>coins:
- amount: <span class="token string">&quot;15527546134174465309&quot;</span>
  denom: gamm/pool/3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details> <h3 id="lock-by-id"><a href="#lock-by-id" class="header-anchor">#</a> lock-by-id</h3> <p>Query a lock record by its ID</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup lock-by-id <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>Every time a user bonds tokens to an LP, a unique lock ID is created for that transaction.</p> <p>Here is an example viewing the lock record for ID 9:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup lock-by-id <span class="token number">9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>And its output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>lock:
  ID: <span class="token string">&quot;9&quot;</span>
  coins:
  - amount: <span class="token string">&quot;2449472670508255020346507&quot;</span>
    denom: gamm/pool/2
  duration: 336h
  end_time: <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
  owner: osmo16r39ghhwqjcwxa8q3yswlz8jhzldygy66vlm82
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>In summary, this shows wallet <code>osmo16r39ghhwqjcwxa8q3yswlz8jhzldygy66vlm82</code> bonded <code>2449472.670 gamm/pool/2</code> LP shares for a <code>2 week</code> locking period.</p></details> <h3 id="module-balance"><a href="#module-balance" class="header-anchor">#</a> module-balance</h3> <p>Query the balance of all LP shares (bonded and unbonded)</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup module-balance
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup module-balance
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>An example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>coins:
- amount: <span class="token string">&quot;118851922644152734549498647&quot;</span>
  denom: gamm/pool/1
- amount: <span class="token string">&quot;2165392672114512349039263626&quot;</span>
  denom: gamm/pool/10
- amount: <span class="token string">&quot;9346769826591025900804&quot;</span>
  denom: gamm/pool/13
- amount: <span class="token string">&quot;229347389639275840044722315&quot;</span>
  denom: gamm/pool/15
- amount: <span class="token string">&quot;81217698776012800247869&quot;</span>
  denom: gamm/pool/183
- amount: <span class="token string">&quot;284253336860259874753775&quot;</span>
  denom: gamm/pool/197
- amount: <span class="token string">&quot;664300804648059580124426710&quot;</span>
  denom: gamm/pool/2
- amount: <span class="token string">&quot;5087102794776326441530430&quot;</span>
  denom: gamm/pool/22
- amount: <span class="token string">&quot;178900843925960029029567880&quot;</span>
  denom: gamm/pool/3
- amount: <span class="token string">&quot;64845148811263846652326124&quot;</span>
  denom: gamm/pool/4
- amount: <span class="token string">&quot;177831279847453210600513&quot;</span>
  denom: gamm/pool/42
- amount: <span class="token string">&quot;18685913727862493301261661338&quot;</span>
  denom: gamm/pool/5
- amount: <span class="token string">&quot;23579028640963777558149250419&quot;</span>
  denom: gamm/pool/6
- amount: <span class="token string">&quot;1273329284855460149381904976&quot;</span>
  denom: gamm/pool/7
- amount: <span class="token string">&quot;625252103927082207683116933&quot;</span>
  denom: gamm/pool/8
- amount: <span class="token string">&quot;1148475247281090606949382402&quot;</span>
  denom: gamm/pool/9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div></details> <h3 id="module-locked-amount"><a href="#module-locked-amount" class="header-anchor">#</a> module-locked-amount</h3> <p>Query the balance of all bonded LP shares</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup module-locked-amount
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup module-locked-amount
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>An example output:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>
  <span class="token string">&quot;coins&quot;</span><span class="token builtin class-name">:</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/1&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;247321084020868094262821308&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/10&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2866946821820635047398966697&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/13&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;9366580741745176812984&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/15&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;193294911294343602187680438&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/183&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;196722012808526595790871&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/197&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1157025085661167198918241&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/2&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;633051132033131378888258047&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;denom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gamm/pool/22&quot;</span>,
      <span class="token string">&quot;amount&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;3622601406125950733194696&quot;</span>
    <span class="token punctuation">}</span>,
<span class="token punctuation">..</span>.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>NOTE: This command seems to only work on gRPC and on CLI returns an EOF error.</p></details> <h3 id="output-all-locks"><a href="#output-all-locks" class="header-anchor">#</a> output-all-locks</h3> <p>Output all locks into a json file</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup output-all-locks <span class="token punctuation">[</span>max lock ID<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>This example command outputs locks 1-1000 and saves to a json file:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup output-all-locks <span class="token number">1000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>If a lockup has been completed, the lockup status will show as &quot;0&quot; (or successful) and no further information will be available. To get further information on a completed lock, run the lock-by-id query.</p></div></details> <h3 id="total-locked-of-denom"><a href="#total-locked-of-denom" class="header-anchor">#</a> total-locked-of-denom</h3> <p>Query locked amount for a specific denom in the duration provided</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd query lockup total-locked-of-denom <span class="token punctuation">[</span>denom<span class="token punctuation">]</span> --min-duration
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>Example</summary> <p>This example command outputs the amount of <code>gamm/pool/2</code> LP shares that locked in the <code>2 week</code> bonding period:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>osmosisd query lockup total-locked-of-denom gamm/pool/2 --min-duration <span class="token string">&quot;336h&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Which, at the time of this writing outputs <code>14106985399822075248947045</code> which is equivalent to <code>14106985.3998 gamm/pool/2</code></p> <p>NOTE: As of this writing, there is a bug that defaults the min duration to days instead of seconds. Ensure you specify the time in seconds to get the correct response.
:::</p></details></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/osmosis-labs/docs/edit/main/developing/osmosis-core/modules/spec-lockup.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Updated on:</span> <span class="time">6/21/2022, 9:29:20 PM</span></div></footer> <div class="page-nav"><div class="inner"><div class="prev"><a href="/developing/osmosis-core/modules/spec-gov.html">Gov</a></div> <div class="next"><a href="/developing/osmosis-core/modules/spec-mint.html">Mint</a></div></div></div>  <div class="footer-container"><div class="company"><div class="copyright">Osmosis Labs</div></div> <div class="links-container"><ul class="learn"><li>Learn</li> <li><a href="https://medium.com/@Osmosis" target="_blank">Medium</a></li> <li><a href="https://commonwealth.im/osmosis/" target="_blank">Commonwealth</a></li></ul> <ul class="developers"><li>Tools</li> <li><a href="https://app.osmosis.zone" target="_blank">Osmosis App</a></li> <li><a href="https://www.mintscan.io/osmosis" target="_blank">Osmosis Explorer</a></li> <li><a href="https://info.osmosis.zone/" target="_blank">Stats</a></li></ul> <ul class="developers"><li>Osmo</li> <li><a href="https://docs.osmosis.zone/overview/osmo.html#purpose" target="_blank">What is Osmo?</a></li> <li><a href="https://docs.osmosis.zone/overview/osmosis-app/#bonding-lp-tokens" target="_blank">Pools</a></li> <li><a href="https://docs.osmosis.zone/overview/wallets/keplr/" target="_blank">Wallets</a></li></ul> <ul class="developers"><li>Foundation</li> <li><a href="https://angel.co/company/osmosis-labs/jobs" target="_blank">Careers</a></li></ul> <ul class="developers"><li>Developers</li> <li><a href="https://github.com/osmosis-labs" target="_blank">Github</a></li></ul> <ul class="developers"><li>Validators</li> <li><a href="https://docs.osmosis.zone/validators/" target="_blank">Validator Guide</a></li> <li><a href="https://discord.gg/3gSAbqV3Qp" target="_blank">Discord Channel</a></li></ul></div> <div class="sns-container"><div class="logos"><a href="https://discord.gg/3gSAbqV3Qp" rel="noopener" target="_blank"><img src="/img/discord.svg" alt="link to Osmosis discord room"></a> <a href="https://medium.com/@Osmosis" rel="noopener" target="_blank"><img src="/img/medium.svg" alt="link to Osmosis medium"></a> <a href="https://twitter.com/osmosiszone" rel="noopener" target="_blank"><img src="/img/twitter.svg" alt="link to Osmosis twitter"></a> <a href="https://www.youtube.com/channel/UC3ScmmLC4WUJAkINyf_p2Rw" rel="noopener" target="_blank"><img src="/img/icon_youtube.png" alt="link to Osmosis youtube"></a> <a href rel="noopener" target="_blank"><img src="/img/icon_telegram.png" alt="link to Osmosis telegram room"></a></div> <a href="https://www.osmosis.zone" target="_blank" class="osmosiszone">osmosis.zone</a></div></div></main></div><div class="global-ui"><div class="darkmode-switch"><div class="item day active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M512 256a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-85.333334 0v85.333333a42.666667 42.666667 0 0 0 42.666667 42.666667zM896 469.333333h-85.333333a42.666667 42.666667 0 0 0 0 85.333334h85.333333a42.666667 42.666667 0 0 0 0-85.333334zM256 512a42.666667 42.666667 0 0 0-42.666667-42.666667H128a42.666667 42.666667 0 0 0 0 85.333334h85.333333a42.666667 42.666667 0 0 0 42.666667-42.666667zM265.386667 213.333333a42.666667 42.666667 0 0 0-59.306667 62.72l61.44 59.306667a42.666667 42.666667 0 0 0 31.146667 11.946667 42.666667 42.666667 0 0 0 30.72-13.226667 42.666667 42.666667 0 0 0 0-60.16zM725.333333 347.306667a42.666667 42.666667 0 0 0 29.44-11.946667l61.44-59.306667A42.666667 42.666667 0 0 0 758.613333 213.333333l-61.44 60.586667a42.666667 42.666667 0 0 0 0 60.16 42.666667 42.666667 0 0 0 28.16 13.226667zM512 768a42.666667 42.666667 0 0 0-42.666667 42.666667v85.333333a42.666667 42.666667 0 0 0 85.333334 0v-85.333333a42.666667 42.666667 0 0 0-42.666667-42.666667zM756.48 688.64a42.666667 42.666667 0 0 0-59.306667 61.44L758.613333 810.666667a42.666667 42.666667 0 0 0 29.44 11.946666 42.666667 42.666667 0 0 0 30.72-12.8 42.666667 42.666667 0 0 0 0-60.586666zM267.52 688.64l-61.44 59.306667a42.666667 42.666667 0 0 0 0 60.586666 42.666667 42.666667 0 0 0 30.72 12.8 42.666667 42.666667 0 0 0 28.586667-10.666666l61.44-59.306667a42.666667 42.666667 0 0 0-59.306667-61.44zM512 341.333333a170.666667 170.666667 0 1 0 170.666667 170.666667 170.666667 170.666667 0 0 0-170.666667-170.666667z"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M935.538601 630.40178c-11.43005-11.432249-28.673759-14.738607-43.531086-8.353536-46.733115 20.10317-96.362866 30.296859-147.50719 30.296859-99.589478 0-193.221796-38.783705-263.640252-109.20316-108.636744-108.636744-139.609745-270.022125-78.9083-411.148441 6.388069-14.85233 3.078713-32.098837-8.353536-43.532285-11.432249-11.432249-28.675758-14.743604-43.532285-8.354536-52.637312 22.64025-100.017388 54.809439-140.82552 95.616372-85.346135 85.346135-132.346869 198.821199-132.346869 319.519766 0 120.699566 47.001733 234.172631 132.347868 319.518766s198.821199 132.349067 319.517567 132.349067c120.699566 0 234.172431-47.002932 319.520765-132.351066 40.808132-40.810131 72.977122-88.190207 95.615373-140.82552C950.282205 659.081735 946.971849 641.834029 935.538601 630.40178z" p-id="3638"></path></svg></div></div></div></div>
    <script src="/assets/js/app.42af3c02.js" defer></script><script src="/assets/js/3.d6962d18.js" defer></script><script src="/assets/js/53.5955892e.js" defer></script>
  </body>
</html>
