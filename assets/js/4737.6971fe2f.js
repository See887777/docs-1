"use strict";(self.webpackChunkosmosis_docs=self.webpackChunkosmosis_docs||[]).push([[4737],{74737:(e,t,i)=>{i.r(t),i.d(t,{dyte_grid:()=>c});var n=i(94196),s=i(47502),a=i(7147),r=i(61070),h=i(62292),o=i(79781);i(55752);const c=class{constructor(e){(0,n.r)(this,e),this.stateUpdate=(0,n.c)(this,"dyteStateUpdate",7),this.hideSelf=!1,this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.responsiveGap=4,this.dimensions=[0,0],this.showWebinarStage=!1,this.canCurrentPeerHost=!1,this.aspectRatio="16:9",this.gap=8,this.config=s.d,this.iconPack=a.d,this.t=(0,r.u)(),this.onViewModeChanged=()=>{null!=this.meeting&&this.updateActiveParticipants()},this.onParticipantJoined=e=>{null!=this.meeting&&(this.participants.some((t=>t.id===e.id))||(this.participants=[...this.participants,e]),e.isPinned&&!this.pinnedParticipants.some((t=>t.id===e.id))&&(this.pinnedParticipants=this.pinnedParticipants.concat([e])),this.updateWebinarStage())},this.onParticipantLeft=e=>{this.participants=this.participants.filter((t=>t.id!==e.id)),this.participants=this.participants.concat(this.meeting.participants.active.toArray().filter((e=>!this.participants.find((t=>t.id===e.id))))),this.pinnedParticipants=this.pinnedParticipants.filter((t=>t.id!==e.id)),e.screenShareEnabled&&this.removeScreenShare(e),this.updateWebinarStage()},this.selfStageJoinListener=()=>{this.updateActiveParticipants()},this.selfStageLeaveListener=()=>{this.removeScreenShare(this.meeting.self),this.updateActiveParticipants()},this.onPresentationStart=()=>{null!=this.meeting&&this.updateActiveParticipants()},this.onPresentationEnd=e=>{null!=this.meeting&&(this.removePinned(e),this.removeScreenShare(e),this.updateActiveParticipants())},this.onScreenShareUpdate=e=>{e.screenShareEnabled?this.addScreenShare(e):this.removeScreenShare(e)},this.onSelfScreenShareUpdate=({screenShareEnabled:e})=>{e?this.addScreenShare(this.meeting.self):this.removeScreenShare(this.meeting.self)},this.onPluginStateUpdate=(e,{active:t})=>{t?this.plugins.some((t=>t.id===e.id))||(this.plugins=[...this.plugins,e]):this.plugins=this.plugins.filter((t=>t.id!==e.id))},this.onParticipantPinned=()=>{this.updateActiveParticipants()},this.onParticipantUnpinned=()=>{this.updateActiveParticipants()}}connectedCallback(){this.sizeChanged(this.size),this.meetingChanged(this.meeting)}disconnectMeeting(e){if(null==e)return;this.participants=[],this.plugins=[];const{self:t,participants:i,plugins:n}=e;i.active.removeListener("participantJoined",this.onParticipantJoined),i.active.removeListener("participantLeft",this.onParticipantLeft),i.joined.removeListener("screenShareUpdate",this.onScreenShareUpdate),i.joined.removeListener("peerStartedPresenting",this.onPresentationStart),i.joined.removeListener("peerStoppedPresenting",this.onPresentationEnd),t.removeListener("screenShareUpdate",this.onSelfScreenShareUpdate),n.all.removeListener("stateUpdate",this.onPluginStateUpdate),i.pinned.removeListener("participantJoined",this.onParticipantPinned),i.pinned.removeListener("participantLeft",this.onParticipantUnpinned),t.removeListener("pinned",this.onParticipantPinned),t.removeListener("unpinned",this.onParticipantUnpinned),i.removeListener("viewModeChanged",this.onViewModeChanged),t.removeListener("stageJoined",this.selfStageJoinListener),t.removeListener("stageLeft",this.selfStageLeaveListener),t.removeListener("removedFromStage",this.selfStageLeaveListener)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}sizeChanged(e){this.responsiveGap="sm"===e?this.gap/2:this.gap}screenShareParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeScreenShare:t}),o.s.activeScreenShare=t}pluginsChanged(e){const t=e.length>0;this.stateUpdate.emit({activePlugin:t}),o.s.activePlugin=t}pinnedParticipantsChanged(e){const t=e.length>0;this.stateUpdate.emit({activeSpotlight:t}),o.s.activeSpotlight=t}updateActiveParticipants(){var e;const{self:t,participants:i}=this.meeting,n=t.permissions,s="WEBINAR"===(null==n?void 0:n.viewType)&&"ON_STAGE"!==t.webinarStageStatus,a=null!==(e=null==n?void 0:n.isRecorder)&&void 0!==e?e:t.permissions.hiddenParticipant;this.hideSelf=s||a,this.participants=[...i.active.toArray().filter((e=>e.id!==t.id)),..."ACTIVE_GRID"!==i.viewMode||t.isPinned||this.hideSelf?[]:[t]],this.pinnedParticipants=[...i.pinned.toArray().filter((e=>e.id!==t.id)),...t.isPinned&&!this.hideSelf?[t]:[]],this.screenShareParticipants=i.joined.toArray().filter((e=>e.screenShareEnabled)),t.screenShareEnabled&&(this.screenShareParticipants=this.screenShareParticipants.concat([t])),this.updateWebinarStage()}updateWebinarStage(){this.meeting&&"WEBINAR"===this.meeting.meta.viewType?this.showWebinarStage=0===this.participants.length&&0===this.pinnedParticipants.length:this.showWebinarStage=!1}meetingChanged(e,t){if(null!==t&&this.disconnectMeeting(t),null!=e){const{self:t,participants:i,plugins:n}=e,s=this.meeting.self.permissions,a="WEBINAR"===(null==s?void 0:s.viewType)&&"ON_STAGE"!==this.meeting.self.webinarStageStatus,r=null==s?void 0:s.isRecorder;this.hideSelf=a||r,this.participants=[...i.active.toArray(),...t.isPinned||this.hideSelf?[]:[t]],this.pinnedParticipants=[...i.pinned.toArray(),...t.isPinned&&!this.hideSelf?[t]:[]],this.screenShareParticipants=i.joined.toArray().filter((e=>e.screenShareEnabled)),this.plugins=n.active.toArray(),"WEBINAR"===(null==s?void 0:s.viewType)&&(this.canCurrentPeerHost=s.acceptPresentRequests||s.canPresent,this.updateWebinarStage()),i.active.addListener("participantJoined",this.onParticipantJoined),i.active.addListener("participantLeft",this.onParticipantLeft),i.joined.addListener("screenShareUpdate",this.onScreenShareUpdate),i.joined.addListener("peerStartedPresenting",this.onPresentationStart),i.joined.addListener("peerStoppedPresenting",this.onPresentationEnd),t.addListener("screenShareUpdate",this.onSelfScreenShareUpdate),n.all.addListener("stateUpdate",this.onPluginStateUpdate),i.pinned.addListener("participantJoined",this.onParticipantPinned),i.pinned.addListener("participantLeft",this.onParticipantUnpinned),t.addListener("pinned",this.onParticipantPinned),t.addListener("unpinned",this.onParticipantUnpinned),t.addListener("stageJoined",this.selfStageJoinListener),t.addListener("stageLeft",this.selfStageLeaveListener),t.addListener("removedFromStage",this.selfStageLeaveListener),i.addListener("viewModeChanged",this.onViewModeChanged)}}addScreenShare(e){this.screenShareParticipants.some((t=>t.id===e.id))||(this.screenShareParticipants=[...this.screenShareParticipants,e])}removeScreenShare(e){this.screenShareParticipants=this.screenShareParticipants.filter((t=>t.id!==e.id))}removePinned(e){this.pinnedParticipants=this.pinnedParticipants.filter((t=>t.id!==e.id))}render(){const e={meeting:this.meeting,size:this.size,states:this.states||o.s,config:this.config,iconPack:this.iconPack,t:this.t};return(0,n.h)(n.H,null,this.showWebinarStage&&(0,n.h)("div",{class:"webinar-stage"},(0,n.h)("div",{class:"center"},this.canCurrentPeerHost&&(0,n.h)("div",null,(0,n.h)("h2",null,this.t("stage.empty_host")),(0,n.h)("p",null,this.t("stage.empty_host_summary"))),!this.canCurrentPeerHost&&(0,n.h)("h2",null,this.t("stage.empty_viewer")))),!this.showWebinarStage&&(0,n.h)(h.R,{element:"dyte-grid",defaults:e,childProps:{participants:this.participants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,pinnedParticipants:this.pinnedParticipants,aspectRatio:this.aspectRatio,gap:this.gap},onlyChildren:!0}))}get host(){return(0,n.g)(this)}static get watchers(){return{size:["sizeChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"],pinnedParticipants:["pinnedParticipantsChanged"],meeting:["meetingChanged"]}}};c.style=":host{display:flex;height:100%;width:100%;overflow:hidden;font-family:var(--dyte-font-family, sans-serif);flex-wrap:wrap;align-content:center;align-items:center;justify-content:center;color:rgb(var(--dyte-colors-text-1000, 255 255 255));transition:0.4s}dyte-participant-tile{aspect-ratio:initial;box-sizing:border-box}.webinar-stage{box-sizing:border-box;display:flex;align-content:center;align-items:center;justify-content:center;text-align:center}.webinar-stage h2{margin:var(--dyte-space-0, 0px);font-weight:normal}"},61070:(e,t,i)=>{i.d(t,{g:()=>s,u:()=>a});var n=i(55752);const s=async e=>{if(null==e||"en"===e||""===e.trim())return n.d;try{const t=await fetch(`http://localhost:5000/${e}.json`);return t.ok?Object.assign({},n.d,await t.json()):n.d}catch(t){return n.d}},a=(e=n.d)=>t=>{var i;return null!==(i=e[t])&&void 0!==i?i:t}},62292:(e,t,i)=>{i.d(t,{R:()=>a});var n=i(94196);const s=({elements:e,defaults:t,props:i={},deepProps:s=!1})=>Array.isArray(e)&&0!==e.length?e.map((e=>(0,n.h)(a,{element:e,defaults:t,props:i,childProps:s&&i}))):null,a=({element:e,defaults:t,childProps:i={},props:a={},onlyChildren:r=!1,asHost:h=!1,deepProps:o=!1},c)=>{var p;const{config:d,size:l,states:g}=t;let u,f={};Array.isArray(e)?[u,f]=e:u=e;const S=null===(p=null==d?void 0:d.root)||void 0===p?void 0:p[u];null!=S&&"props"in S&&(a=Object.assign(Object.assign({},S.props),a)),a=Object.assign(Object.assign({},a),f);const P=(({element:e,size:t,states:i={},config:n={}})=>{let s=[];const a=null==n?void 0:n.root[e],r=e=>{s.push(e),"string"==typeof t&&s.push(`${e}.${t}`)};if(r(e),"object"==typeof a&&!Array.isArray(a)&&null!==a){const{state:t,states:n}=a;let s=e,h=[];if(Array.isArray(n)){h=n.filter((e=>i[e])),h.sort();for(const e of h)r(`${s}.${e}`);h.length>1&&r([s,...h].join("."))}if("string"==typeof t){const n=`${e}[${t}=${i[t]}]`;r(n);for(const e of h)r(`${n}.${e}`);h.length>1&&r([n,...h].join("."))}}return s})({element:u,size:l,states:g,config:d}),m=(({selectors:e,root:t})=>{if(!Array.isArray(e)||null==t)return[];for(let i=e.length-1;i>=0;i--){const n=t[e[i]];if(Array.isArray(n))return n;if(Array.isArray(null==n?void 0:n.children))return n.children}return[]})({selectors:P,root:d.root});if(r)return(0,n.h)(s,{elements:m,defaults:t,props:i,deepProps:o});const v=(({selectors:e,styles:t})=>{if(!Array.isArray(e)||null==t)return{};const i={};for(const n of e){const e=t[n];null!=e&&Object.assign(i,e)}return i})({selectors:P,styles:d.styles});if(h)return(0,n.h)(n.H,Object.assign({},t,{style:v},a),(0,n.h)(s,{elements:m,defaults:t,props:i,deepProps:o}),c);if(u.startsWith("dyte-"))return(0,n.h)(u,Object.assign({},t,{style:v},a),(0,n.h)(s,{elements:m,defaults:t,props:i,deepProps:o}),c);{const[e,a]=u.split("#");return(0,n.h)(e,{id:a,style:v},(0,n.h)(s,{elements:m,defaults:t,props:i,deepProps:o}),c)}}},79781:(e,t,i)=>{i.d(t,{o:()=>o,s:()=>h});var n=i(94196);const s=e=>!("isConnected"in e)||e.isConnected,a=((e,t)=>{let i;return(...n)=>{i&&clearTimeout(i),i=setTimeout((()=>{i=0,e(...n)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))}),2e3),r=(e,t)=>{const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.length--)},{state:h,onChange:o}=((e,t)=>{const i=((e,t=((e,t)=>e!==t))=>{let i=new Map(Object.entries(null!=e?e:{}));const n={dispose:[],get:[],set:[],reset:[]},s=()=>{i=new Map(Object.entries(null!=e?e:{})),n.reset.forEach((e=>e()))},a=e=>(n.get.forEach((t=>t(e))),i.get(e)),h=(e,s)=>{const a=i.get(e);t(s,a,e)&&(i.set(e,s),n.set.forEach((t=>t(e,s,a))))},o="undefined"==typeof Proxy?{}:new Proxy(e,{get:(e,t)=>a(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,i)=>(h(t,i),!0)}),c=(e,t)=>(n[e].push(t),()=>{r(n[e],t)});return{state:o,get:a,set:h,on:c,onChange:(t,i)=>{const n=c("set",((e,n)=>{e===t&&i(n)})),s=c("reset",(()=>i(e[t])));return()=>{n(),s()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(c("set",t.set)),t.get&&e.push(c("get",t.get)),t.reset&&e.push(c("reset",t.reset)),t.dispose&&e.push(c("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{n.dispose.forEach((e=>e())),s()},reset:s,forceUpdate:e=>{const t=i.get(e);n.set.forEach((i=>i(e,t,t)))}}})(e,t);return i.use((()=>{if("function"!=typeof n.a)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const i=(0,n.a)();i&&((e,t,i)=>{const n=e.get(t);n?n.includes(i)||n.push(i):e.set(t,[i])})(e,t,i)},set:t=>{const i=e.get(t);i&&e.set(t,i.filter(n.f)),a(e)},reset:()=>{e.forEach((e=>e.forEach(n.f))),a(e)}}})()),i})({})}}]);