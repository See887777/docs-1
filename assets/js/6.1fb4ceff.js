(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{425:function(e,t,s){e.exports=s.p+"assets/img/beaker-admin.e0ca7617.png"},426:function(e,t,s){e.exports=s.p+"assets/img/store-prop.8d7696c6.png"},427:function(e,t,s){e.exports=s.p+"assets/img/proposal-query.eedf75ed.png"},428:function(e,t,s){e.exports=s.p+"assets/img/faucet-vote.cf6047ae.png"},478:function(e,t,s){"use strict";s.r(t);var a=s(8),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"cosmwasm-with-testnet-beaker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cosmwasm-with-testnet-beaker"}},[e._v("#")]),e._v(" Cosmwasm with Testnet & Beaker")]),e._v(" "),a("h2",{attrs:{id:"deploying-cosmwasm-contracts-to-the-testnet-with-beaker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-cosmwasm-contracts-to-the-testnet-with-beaker"}},[e._v("#")]),e._v(" Deploying Cosmwasm Contracts to the testnet with Beaker")]),e._v(" "),a("p",[e._v("The following guide will show you how to create and deploy a Cosmwasm smart contract to the Osmosis testnet. The testnet is permisonless by default to allow developers to test their contracts on a live environment. The Osmosis mainnet is permissioned meaning that you will need to submit a governance proposal in order to deploy to it.")]),e._v(" "),a("h3",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rust"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://doc.rust-lang.org/cargo/getting-started/installation.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cargo"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"install-beaker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-beaker"}},[e._v("#")]),e._v(" Install Beaker")]),e._v(" "),a("p",[e._v("Beaker is available via "),a("a",{attrs:{href:"https://doc.rust-lang.org/cargo/getting-started/installation.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("cargo"),a("OutboundLink")],1),e._v(" which is a rust toolchain. Once cargo is ready on your machine, run:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("cargo "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" beaker\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"scaffolding-your-new-dapp-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scaffolding-your-new-dapp-project"}},[e._v("#")]),e._v(" Scaffolding your new dapp project")]),e._v(" "),a("p",[e._v("In the directory you want your project to reside, run:")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("beaker new counter-dapp\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("For detailed information about Beaker "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker/edit/main/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("click here"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"your-first-cosmwasm-contract-with-beaker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#your-first-cosmwasm-contract-with-beaker"}},[e._v("#")]),e._v(" Your first CosmWasm contract with Beaker")]),e._v(" "),a("p",[e._v("After that we can create new contract (the command uses template from "),a("a",{attrs:{href:"https://github.com/InterWasm/cw-template",target:"_blank",rel:"noopener noreferrer"}},[e._v("cw-template"),a("OutboundLink")],1),e._v(")")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" counter-dapp\nbeaker wasm new counter\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h3",{attrs:{id:"deploy-contract-on-permisionless-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-contract-on-permisionless-network"}},[e._v("#")]),e._v(" Deploy contract on permisionless network")]),e._v(" "),a("p",[e._v("The testnet is permisionless by default in order to allow developers to easyly deploy contracts.")]),e._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("beaker wasm deploy counter --signer-account test1 --network testnet --no-wasm-opt --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{ \"count\": 0 }'")]),e._v(" --label "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'My first Beaker Contract'")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Note how we added "),a("code",[e._v("--network testnet")]),e._v(" to tell beaker to deploy to the testnet Osmosis chain.")]),e._v(" "),a("h3",{attrs:{id:"deploy-with-an-admin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-with-an-admin"}},[e._v("#")]),e._v(" Deploy with an admin")]),e._v(" "),a("p",[e._v("In this example we are using "),a("code",[e._v("osmo1nyphwl8p5yx6fxzevjwqunsfqpcxukmtk8t60m")]),e._v(" which is the address from the beaker test1 account as seen in the "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker/blob/main/packages/cli/src/framework/config.rs",target:"_blank",rel:"noopener noreferrer"}},[e._v("config.rs"),a("OutboundLink")],1),e._v(" file.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("Please note that account test1 is publicaly available as documented "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker/blob/main/docs/config/global.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(" and only used for development purposes. Beaker will support local keyring in about 1-2 weeks.")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("beaker wasm deploy counter --signer-account test1 --admin osmo1nyphwl8p5yx6fxzevjwqunsfqpcxukmtk8t60m --network testnet --no-wasm-opt --raw '{ \"count\": 0 }' --label 'My first Beaker Contract' \n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:s(425),alt:"deploy-counter-admin"}})]),e._v(" "),a("h3",{attrs:{id:"deploy-contract-via-governance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-contract-via-governance"}},[e._v("#")]),e._v(" Deploy contract via governance")]),e._v(" "),a("p",[e._v("We can also deploy the contract via governance on the testnet before going to mainnet. There are a couple of steps as described in the manual process via CLI"),a("a",{attrs:{href:"https://docs.osmosis.zone/developing/dapps/get_started/submit_wasm_proposal.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(", more details also available on the "),a("a",{attrs:{href:"https://github.com/CosmWasm/wasmd/blob/main/x/wasm/Governance.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("official CosmWasm Docs"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"build-contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-contract"}},[e._v("#")]),e._v(" Build contract")]),e._v(" "),a("p",[e._v("This is required to create the compiled.wasm file that will be uploaded to the block chain.")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("beaker wasm build\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"submit-proposal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#submit-proposal"}},[e._v("#")]),e._v(" Submit proposal")]),e._v(" "),a("p",[e._v("The proposal can be submitted with all the meta data in a yml file or toml file. Example file:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("touch prop.yml\nnano prop.yml\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("Paste the following template")]),e._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Proposal to allow DappName to be enabled in Osmosis\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[e._v("\n            A lengthy proposal description\n            goes here  \n            we expect this to be many lines...")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("deposit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 500000000uosmo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("repo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("   https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//github.com/osmosis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("labs/beaker/\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("rust_flags")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("C link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("arg="),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("s\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("roptimizer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" workspace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("optimizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("0.12.6\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("beaker wasm proposal store-code --proposal prop.yml --signer-account test1 --network testnet counter --gas 25000000uosmo --gas-limit "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("25000000")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:s(426),alt:"store-proposal"}})]),e._v(" "),a("h3",{attrs:{id:"query-proposal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query-proposal"}},[e._v("#")]),e._v(" Query proposal")]),e._v(" "),a("p",[e._v("There are four ways to query the proposal results")]),e._v(" "),a("ol",[a("li",[e._v("Beaker command")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("beaker wasm proposal query store-code --network testnet counter\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Osmosisd")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("osmosisd query gov tally 196\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Mintstan testnet explorer")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("https://testnet.mintscan.io/osmosis-testnet/proposals/196\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("LCD Proposal endpoint")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("https://lcd-test.osmosis.zone/cosmos/gov/v1beta1/proposals/196\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Note how the min_deposit was "),a("code",[e._v("500000000uosmo")]),e._v(" that's why our prop.yml had "),a("code",[e._v("500000000uosmo")]),e._v(". If the deposit requirement is not met, then additional funds need to be send to the proposal.")]),e._v(" "),a("h4",{attrs:{id:"proposal-period"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proposal-period"}},[e._v("#")]),e._v(" Proposal period")]),e._v(" "),a("p",[e._v("On the testnet the voting period is very short to allow developers to move quickly with their testing, as you can see in this case it's "),a("code",[e._v("3 minutes")]),e._v(". This means you must vote within the next 3 minutes for your proposal to pass. In mainet the voting period is usually several days. If you take longer than 3 minutes, then you will get an error letting you know that the voting period has passed.")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    ├── voting_start_time: 2022-07-06T18:45:06Z\n    └── voting_end_time: 2022-07-06T18:48:06Z\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:s(427),alt:"store-proposal"}})]),e._v(" "),a("h2",{attrs:{id:"voting-on-proposal-on-testnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#voting-on-proposal-on-testnet"}},[e._v("#")]),e._v(" Voting on proposal on testnet")]),e._v(" "),a("p",[e._v("Run the following command to vote from beaker")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("beaker wasm proposal vote --option yes counter --signer-account test1 --network testnet\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Even though the testnet is configured as permisionless, it's important to undertanding the voting process. We need validators to vote  for your proposal in order to reach the quorum. We created a simple utility in our faucet that will allow you to request a validator with enough voting power to vote for your proposal as well.")]),e._v(" "),a("p",[e._v("Please visit:")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://faucet.osmosis.zone/#/contracts",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://faucet.osmosis.zone/#/contracts"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:s(428),alt:"store-proposal"}})]),e._v(" "),a("p",[e._v("Great! Your proposal should have passed now!")]),e._v(" "),a("h3",{attrs:{id:"signers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signers"}},[e._v("#")]),e._v(" Signers")]),e._v(" "),a("p",[e._v("In the examples above we used the test1 account to sign transactions. However, Bekaer supports 3 options for signing transactions as shown on the official "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker#Signers",target:"_blank",rel:"noopener noreferrer"}},[e._v("README"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("--signer-account")]),e._v(" input of this option refer to the accounts defined in the "),a("RouterLink",{attrs:{to:"/developing/dapps/get_started/docs/config/global.html"}},[e._v("config file")]),e._v(", which is not encrypted, so it should be used only for testing")],1),e._v(" "),a("li",[a("code",[e._v("--signer-mnemonic")]),e._v(" input of this option is the raw mnemonic string to construct a signer")]),e._v(" "),a("li",[a("code",[e._v("--signer-private-key")]),e._v(" input of this option is the same as "),a("code",[e._v("--signer-mnemonic")]),e._v(" except it expects base64 encoded private key")]),e._v(" "),a("li",[a("code",[e._v("--signer-keyring")]),e._v(" use the OS secure store as backend to securely store your key. To manage them, you can find more information "),a("RouterLink",{attrs:{to:"/developing/dapps/get_started/docs/commands/beaker_key.html"}},[e._v("here")]),e._v(".")],1)]),e._v(" "),a("p",[e._v("This document is constantly being updated and improved, please let us know on Github if you have any questions!")])])}),[],!1,null,null,null);t.default=r.exports}}]);