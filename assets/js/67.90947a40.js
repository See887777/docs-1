(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{519:function(t,s,a){"use strict";a.r(s);var e=a(8),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"beaker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beaker"}},[t._v("#")]),t._v(" Beaker")]),t._v(" "),a("p",{attrs:{align:"center"}},[a("a",{attrs:{href:"https://docs.osmosis.zone/developing/dapps/get_started/"}},[a("img",{attrs:{src:"https://raw.githubusercontent.com/osmosis-labs/beaker/main/assets/beaker.png",alt:"Beaker logo",title:"Beaker",align:"center",height:"150"}})])]),t._v(" "),a("p",{attrs:{align:"center",width:"100%"}},[a("img",{attrs:{height:"20",src:"https://github.com/osmosis-labs/beaker/actions/workflows/doctest.yml/badge.svg"}}),t._v(" "),a("img",{attrs:{height:"20",src:"https://github.com/osmosis-labs/beaker/actions/workflows/lint.yml/badge.svg"}}),t._v(" "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker/blob/main/LICENSE-APACHE"}},[a("img",{attrs:{height:"20",src:"https://img.shields.io/badge/license-APACHE-blue.svg"}})]),t._v(" "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker/blob/main/LICENSE-MIT"}},[a("img",{attrs:{height:"20",src:"https://img.shields.io/badge/license-MIT-blue.svg"}})]),t._v(" "),a("a",{attrs:{href:"https://deps.rs/repo/github/osmosis-labs/beaker"}},[a("img",{attrs:{height:"20",src:"https://deps.rs/repo/github/osmosis-labs/beaker/status.svg"}})]),t._v(" "),a("a",{attrs:{href:"https://crates.io/crates/beaker"}},[a("img",{attrs:{height:"20",src:"https://img.shields.io/crates/v/beaker.svg"}})])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker",target:"_blank",rel:"noopener noreferrer"}},[t._v("Beaker"),a("OutboundLink")],1),t._v(" makes it easy to scaffold a new cosmwasm app, with all of the dependencies for osmosis hooked up, interactive console, and a sample front-end at the ready.")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"table-of-contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[t._v("#")]),t._v(" Table of Contents")]),t._v(" "),a("h3",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#installation"}},[t._v("Installation")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#prerequisites"}},[t._v("Prerequisites")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#scaffolding-your-new-dapp-project"}},[t._v("Scaffolding your new dapp project")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#frontend-and-contracts"}},[a("code",[t._v("frontend")]),t._v(" and "),a("code",[t._v("contracts")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#cargotoml"}},[a("code",[t._v("Cargo.toml")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#beakertoml"}},[a("code",[t._v("Beaker.toml")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#beaker-1"}},[a("code",[t._v(".beaker")])])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#your-first-cosmwasm-contract-with-beaker"}},[t._v("Your first CosmWasm contract with Beaker")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#deploy-contract-on-localosmosis"}},[t._v("Deploy contract on LocalOsmosis")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#contract-upgrade"}},[t._v("Contract Upgrade")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#signers"}},[t._v("Signers")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#console"}},[t._v("Console")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#typescript-sdk-generation"}},[t._v("Typescript SDK Generation")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#frontend"}},[t._v("Frontend")])])]),t._v(" "),a("h3",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" Reference")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"./docs/commands"}},[t._v("Command")])]),t._v(" "),a("li",[a("a",{attrs:{href:"./docs/config"}},[t._v("Config")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"getting-started-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-2"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),a("p",[t._v("This section is intended to give you an introduction to "),a("code",[t._v("Beaker")]),t._v(", for more detailed reference, you can find them "),a("RouterLink",{attrs:{to:"/developing/tools/beaker/docs/commands/"}},[t._v("here")]),t._v(".")],1),t._v(" "),a("h3",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.rust-lang.org/tools/install",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rust"),a("OutboundLink")],1),t._v(" for building cosmwasm contract\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://rustup.rs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rustup"),a("OutboundLink")],1),t._v(" for dealing with wasm target")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.docker.com/get-docker/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),a("OutboundLink")],1),t._v(" for running wasm "),a("code",[t._v("rust-optimizer")]),t._v(" and spinning up "),a("a",{attrs:{href:"https://github.com/osmosis-labs/localosmosis",target:"_blank",rel:"noopener noreferrer"}},[t._v("LocalOsmosis"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node"),a("OutboundLink")],1),t._v(" for frontend related stuffs and "),a("code",[t._v("beaker-console")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://yarnpkg.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yarn"),a("OutboundLink")],1),t._v(" over NPM, since it will not have package resolving issue and causes weird errors down the road")])])])]),t._v(" "),a("h3",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),a("p",[t._v("Beaker is available via "),a("a",{attrs:{href:"https://doc.rust-lang.org/cargo/getting-started/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cargo"),a("OutboundLink")],1),t._v(" which is a rust toolchain. Once cargo is ready on your machine, run:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("cargo "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -f beaker "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `-f` flag for up-to-date version")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Now "),a("code",[t._v("beaker")]),t._v(" is ready to use!")]),t._v(" "),a("h3",{attrs:{id:"scaffolding-your-new-dapp-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scaffolding-your-new-dapp-project"}},[t._v("#")]),t._v(" Scaffolding your new dapp project")]),t._v(" "),a("p",[t._v("In the directory you want your project to reside, run:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker new counter-dapp\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("This will generate new directory called "),a("code",[t._v("counter-dapp")]),t._v(" which, by default, come from "),a("a",{attrs:{href:"https://github.com/osmosis-labs/beaker/tree/main/templates/project",target:"_blank",rel:"noopener noreferrer"}},[t._v("this template"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("So what's in the template? Let's have a look...")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(".\n├── frontend\n├── contracts\n├── Cargo.toml\n├── Beaker.toml\n├── .gitignore\n└── .beaker\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h4",{attrs:{id:"frontend-and-contracts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontend-and-contracts"}},[t._v("#")]),t._v(" "),a("code",[t._v("frontend")]),t._v(" and "),a("code",[t._v("contracts")])]),t._v(" "),a("p",[t._v("These should be self explanatory, it's where frontend and contracts are stored. And as you might be able to guess from the name, one project can contain multiple contracts.")]),t._v(" "),a("h4",{attrs:{id:"cargo-toml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cargo-toml"}},[t._v("#")]),t._v(" "),a("code",[t._v("Cargo.toml")])]),t._v(" "),a("p",[t._v("There is a "),a("code",[t._v("Cargo.toml")]),t._v(" here which specifies "),a("a",{attrs:{href:"https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cargo workspace"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[workspace]\n\nmembers = [\n  'contracts/*',\n]\n\n[profile.release]\n...\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("All the crates (rust packages) in contracts directory are included, with unified release profile. With this, when we have to optimize multiple contracts deterministically, we can do that with ease (see "),a("a",{attrs:{href:"https://github.com/CosmWasm/rust-optimizer#contracts-as-workspace-members",target:"_blank",rel:"noopener noreferrer"}},[t._v("Contracts as Workspace Members section in rust-optimizer"),a("OutboundLink")],1),t._v(").")]),t._v(" "),a("h4",{attrs:{id:"beaker-toml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beaker-toml"}},[t._v("#")]),t._v(" "),a("code",[t._v("Beaker.toml")])]),t._v(" "),a("p",[t._v("This is our configuration file, you can find more information about it "),a("RouterLink",{attrs:{to:"/developing/tools/beaker/docs/config/"}},[t._v("here")]),t._v(".")],1),t._v(" "),a("h4",{attrs:{id:"beaker-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beaker-2"}},[t._v("#")]),t._v(" "),a("code",[t._v(".beaker")])]),t._v(" "),a("p",[t._v("Last but not least, "),a("code",[t._v(".beaker")]),t._v(" which is the most unusal part. It contains 2 files:")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("├── state.json\n└── state.local.json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("These 2 files has similar functionality, which are containing beaker related state such as "),a("code",[t._v("address")]),t._v(", "),a("code",[t._v("code-id")]),t._v(", "),a("code",[t._v("label")]),t._v(" for each contract on each network for later use.")]),t._v(" "),a("p",[t._v("While "),a("code",[t._v("state.json")]),t._v(" is there for mainnet and testnet state. "),a("code",[t._v("state.local.json")]),t._v(" is intended to use locally and "),a("em",[t._v("being gitignored")]),t._v(" since its state will not make any sense on other's machine.")]),t._v(" "),a("p",[t._v("And I don't think we have to explain about "),a("code",[t._v(".gitignore")]),t._v(" don't we?")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"your-first-cosmwasm-contract-with-beaker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#your-first-cosmwasm-contract-with-beaker"}},[t._v("#")]),t._v(" Your first CosmWasm contract with Beaker")]),t._v(" "),a("p",[t._v("After that we can create new contract (the command uses template from "),a("a",{attrs:{href:"https://github.com/InterWasm/cw-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("cw-template"),a("OutboundLink")],1),t._v(")")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" counter-dapp\nbeaker wasm new counter\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("Now your new contract will be avaiable on "),a("code",[t._v("contracts/counter")]),t._v(".")]),t._v(" "),a("p",[t._v("If you want to use other contract template, you can change the configuration, for example:")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# Beaker.toml\n\n[wasm]\ntemplate_repo = "https://github.com/osmosis-labs/cw-tpl-osmosis.git"\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"deploy-contract-on-localosmosis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-contract-on-localosmosis"}},[t._v("#")]),t._v(" Deploy contract on LocalOsmosis")]),t._v(" "),a("p",[t._v("LocalOsmosis, as it's name suggest, is Osmosis for local development. In the upcoming release, Beaker will have more complete integration with LocalOsmosis, it has to be installed and run separately.")]),t._v(" "),a("p",[t._v("You can install from source by following the instruction at "),a("a",{attrs:{href:"https://github.com/osmosis-labs/LocalOsmosis",target:"_blank",rel:"noopener noreferrer"}},[t._v("osmosis-labs/LocalOsmosis"),a("OutboundLink")],1),t._v(", or use the official installer and select option 3:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sL https://get.osmosis.zone/install "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" i.py "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" python3 i.py\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("After that, "),a("code",[t._v("counter")]),t._v(" contract can be deployed (build + store-code + instantiate) using the following command:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm deploy counter --signer-account test1 --no-wasm-opt --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("What's happending here equivalent to the following command sequence:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# build .wasm file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stored in `target/wasm32-unknown-unknown/release/<CONTRACT_NAME>.wasm`")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `--no-wasm-opt` is suitable for development, explained below")]),t._v("\nbeaker wasm build --no-wasm-opt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# read .wasm in `target/wasm32-unknown-unknown/release/<CONTRACT_NAME>.wasm` due to `--no-wasm-opt` flag")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# use `--signer-account test1` which is predefined.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The list of all predefined accounts are here: https://github.com/osmosis-labs/LocalOsmosis#accounts")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `code-id` is stored in the beaker state, local by default")]),t._v("\nbeaker wasm store-code counter --signer-account test1 --no-wasm-opt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# instantiate counter contract")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# with instantiate msg: '{ \"count\": 0 }'")]),t._v("\nbeaker wasm instanitate counter --signer-account test1 --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("The flag "),a("code",[t._v("--no-wasm-opt")]),t._v(" is skipping "),a("a",{attrs:{href:"https://github.com/CosmWasm/rust-optimizer",target:"_blank",rel:"noopener noreferrer"}},[t._v("rust-optimizer"),a("OutboundLink")],1),t._v(" for faster development iteration.")]),t._v(" "),a("p",[t._v("For testnet/mainnet deployment, use:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm deploy counter --signer-account "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ACCOUNT"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v(" --network testnet\nbeaker wasm deploy counter --signer-account "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ACCOUNT"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v(" --network mainnet\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("Instantiate message can be stored for later use:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" contracts/counter/instantiate-msgs\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" contracts/counter/instantiate-msgs/default.json\nbeaker wasm deploy counter --signer-account test1 --no-wasm-opt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("You can find references for "),a("RouterLink",{attrs:{to:"/developing/tools/beaker/docs/commands/beaker_wasm.html"}},[a("code",[t._v("beaker wasm")]),t._v(" subcommand here")]),t._v(".")],1),t._v(" "),a("h3",{attrs:{id:"contract-upgrade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract-upgrade"}},[t._v("#")]),t._v(" Contract Upgrade")]),t._v(" "),a("p",[t._v("Contract upgrade in CosmWasm goes through the following steps:")]),t._v(" "),a("ol",[a("li",[t._v("store new code on to the chain")]),t._v(" "),a("li",[t._v("broadcast migrate msg, targeting the contract address that wanted to be upgraded with the newly stored code")])]),t._v(" "),a("p",[t._v("To make a contract migratable, the contract needs to have proper entrypoint and admin designated.")]),t._v(" "),a("p",[t._v("To create the contract entrypoint for migration, first, define "),a("code",[t._v("MigrateMsg")]),t._v(" in "),a("code",[t._v("msg.rs")]),t._v(", this could have any information you want to pass for migration.")]),t._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("MigrateMsg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("With MigrateMsg defined we need to update "),a("code",[t._v("contract.rs")]),t._v(". First update the import from "),a("code",[t._v("crate::msg")]),t._v(" to include "),a("code",[t._v("MigrateMsg")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("crate")]),a("span",{pre:!0,attrs:{class:"token module-declaration namespace"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CountResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecuteMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InstantiateMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MigrateMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[cfg_attr(not(feature = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"library"')]),t._v("), entry_point)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("migrate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DepsMut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MigrateMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StdResult")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// perform state update or anything neccessary for the migration")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("Now deploy the contract with admin assigned")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `--admin signer` use signer address (test1's address in this case) as designated admin")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# raw address could be passed in as well")]),t._v("\nbeaker wasm deploy counter --signer-account test1 --no-wasm-opt --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v(" --admin signer\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("Now try to change the execute logic a bit to see if the upgrade works:")]),t._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("try_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DepsMut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContractError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContractError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1 -> 1000000000")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_attribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"try_increment"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("With admin as "),a("code",[t._v("test1")]),t._v(", only "),a("code",[t._v("test1")]),t._v(" can upgrade the contract")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm upgrade counter --signer-account test1 --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{}'")]),t._v(" --no-wasm-opt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Similar to "),a("code",[t._v("deploy")]),t._v(", "),a("code",[t._v("upgrade")]),t._v(" is basiaclly running sequences of commands behind the scene:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm build --no-wasm-opt\nbeaker wasm store-code counter --signer-account test1 --no-wasm-opt\nbeaker wasm migrate counter --signer-account test1 --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{}'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("And, like before, "),a("code",[t._v("--no-wasm-opt")]),t._v(" only means for developement. For mainnet, use:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm upgrade counter --signer-account test1 --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{}'")]),t._v(" --network mainnet\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Migrate message can be stored for later use:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" contracts/counter/migrate-msgs\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{}'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" contracts/counter/migrate-msgs/default.json\nbeaker wasm upgrade counter --signer-account test1 --no-wasm-opt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("You can find more information about their options "),a("RouterLink",{attrs:{to:"/developing/tools/beaker/docs/commands/beaker_wasm.html"}},[t._v("here")]),t._v(".")],1),t._v(" "),a("h3",{attrs:{id:"signers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signers"}},[t._v("#")]),t._v(" Signers")]),t._v(" "),a("p",[t._v("Whenever you run command that requires signing transactions, there are 3 options you can reference your private keys:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("--signer-account")]),t._v(" input of this option refer to the accounts defined in the "),a("RouterLink",{attrs:{to:"/developing/tools/beaker/docs/config/global.html"}},[t._v("config file")]),t._v(", which is not encrypted, so it should be used only for testing")],1),t._v(" "),a("li",[a("code",[t._v("--signer-mnemonic")]),t._v(" input of this option is the raw mnemonic string to construct a signer")]),t._v(" "),a("li",[a("code",[t._v("--signer-private-key")]),t._v(" input of this option is the same as "),a("code",[t._v("--signer-mnemonic")]),t._v(" except it expects base64 encoded private key")]),t._v(" "),a("li",[a("code",[t._v("--signer-keyring")]),t._v(" use the OS secure store as backend to securely store your key. To manage them, you can find more information "),a("RouterLink",{attrs:{to:"/developing/tools/beaker/docs/commands/beaker_key.html"}},[t._v("here")]),t._v(".")],1)]),t._v(" "),a("h3",{attrs:{id:"console"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#console"}},[t._v("#")]),t._v(" Console")]),t._v(" "),a("p",[t._v("After deployed, you can play with the deployed contract using:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker console\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("It might prompt you like the following:")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("? Project's Typescript SDK seems to be missing, would you like to generate? \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Press "),a("code",[t._v("enter")]),t._v(" to proceed for now, and we will discuss about it in detail in the "),a("a",{attrs:{href:"#typescript-sdk-generation"}},[t._v("Typescript SDK Generation")]),t._v(" section.")]),t._v(" "),a("p",[t._v("This will launch custom node repl, where "),a("code",[t._v("contract")]),t._v(", "),a("code",[t._v("account")]),t._v(" are available.\n"),a("code",[t._v("contract")]),t._v(" contains deployed contract.\n"),a("code",[t._v("account")]),t._v(" contains "),a("a",{attrs:{href:"https://github.com/osmosis-labs/LocalOsmosis#accounts",target:"_blank",rel:"noopener noreferrer"}},[t._v("pre-defined accounts in localosmosis"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("So you can interact with the recently deployed contract like this:")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" increment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" get_count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("You can find avaialable methods for the aforementioned instances here:")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/developing/tools/beaker/ts/beaker-console/docs/classes//Account.html#methods-1"}},[t._v("Account")])],1),t._v(" "),a("li",[a("RouterLink",{attrs:{to:"/developing/tools/beaker/ts/beaker-console/docs/classes//Contract.html#methods-1"}},[t._v("Contract")])],1)]),t._v(" "),a("p",[t._v("You can remove "),a("code",[t._v("contract")]),t._v(" and/or "),a("code",[t._v("account")]),t._v(" namespace by changing config.")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# Beaker.toml\n\n[console]\naccount_namespace = false\ncontract_namespace = false\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" increment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" get_count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("With the Typescript SDK which was previously mentioned, it is used to extend the "),a("code",[t._v("Contract")]),t._v(" instance with method generated ftom execute and query messages. For example:")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nsc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create signing client for `counter` with `test1`")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("With this, it's more convenient than the previous interaction method since you can use tab completion for the methods as well.")]),t._v(" "),a("p",[t._v("Beaker console is also allowed to deploy contract, so that you don't another terminal tab to do so.")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deploy counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("account test1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 999 }'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("code",[t._v(".build")]),t._v(", "),a("code",[t._v(".storeCode")]),t._v(", "),a("code",[t._v(".instantiate")]),t._v(" commands are also available and has the same options as Beaker cli command, except that "),a("code",[t._v("--no-wasm-opt")]),t._v(" are in by default since it is being intended to use in the development phase.")]),t._v(" "),a("p",[a("code",[t._v(".help")]),t._v(" to see all avaiable commands.")]),t._v(" "),a("p",[t._v("Apart from that, in the console, you can access Beaker's state, configuration and sdk from "),a("code",[t._v("state")]),t._v(", "),a("code",[t._v("conf")]),t._v(" and "),a("code",[t._v("sdk")]),t._v(" variables accordingly.")]),t._v(" "),a("h3",{attrs:{id:"typescript-sdk-generation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#typescript-sdk-generation"}},[t._v("#")]),t._v(" Typescript SDK Generation")]),t._v(" "),a("p",[t._v("Beaker leverage "),a("a",{attrs:{href:"https://github.com/CosmWasm/cosmwasm-typescript-gen",target:"_blank",rel:"noopener noreferrer"}},[t._v("cosmwasm-typescript-gen"),a("OutboundLink")],1),t._v(" to generate typescript client for cosmwasm contract. By default, Beaker's template prepare "),a("code",[t._v("ts/sdk")]),t._v(" directory where typescript compiler and bundler are setup, so the generated client definition could be used by "),a("code",[t._v("beaker-console")]),t._v(", frontend or published as library for others to use.")]),t._v(" "),a("p",[t._v("To generate sdk for contract, run")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm ts-gen counter "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# replace `counter` with any of contract name")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("With this a package is avaiable in "),a("code",[t._v("ts/sdk")]),t._v(" with name "),a("code",[t._v("<project-name>-sdk")]),t._v(" which can be used by any node / js / ts project.")]),t._v(" "),a("p",[t._v("Let's try adding "),a("code",[t._v("multiply")]),t._v(" method to our contract and see how this works.")]),t._v(" "),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// msg.rs")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(Serialize, Deserialize, Clone, Debug, PartialEq, JsonSchema)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[serde(rename_all = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snake_case"')]),t._v(")]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("ExecuteMsg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Increment")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Multiply")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [1] add this enum variant")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Reset")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("div",{staticClass:"language-rust line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contract.rs")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[cfg_attr(not(feature = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"library"')]),t._v("), entry_point)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DepsMut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    _env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecuteMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContractError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("match")]),t._v(" msg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecuteMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Increment")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("try_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecuteMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Multiply")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" times "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("try_multiply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [2] add this match arm")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecuteMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Reset")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("try_reset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// [3] add this function")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("try_multiply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DepsMut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("i32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContractError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token closure-params"}},[a("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token closure-punctuation punctuation"}},[t._v("|")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContractError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*=")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_attribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"try_multiply"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])]),a("p",[t._v("Then redeploy the contract:")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm deploy counter --signer-account test1 --no-wasm-opt --raw "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{ \"count\": 0 }'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Then regenerate "),a("code",[t._v("counter")]),t._v("'s client")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("beaker wasm ts-gen counter\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("Now we can test it out in the "),a("code",[t._v("beaker console")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("sc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { count: 1 }")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("multiply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { count: 2 }")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("multiply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" times"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { count: 20 }")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("p",[a("code",[t._v("sc")]),t._v(" is an instance of "),a("code",[t._v("CounterContract")]),t._v(" which you can find it in "),a("code",[t._v("ts/sdk/src/contracts/CounterContract.ts")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"frontend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontend"}},[t._v("#")]),t._v(" Frontend")]),t._v(" "),a("p",[t._v("Beaker project template also come with frontend template. But in order to interact with it you need:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.keplr.app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Keplr installed"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/osmosis-labs/LocalOsmosis/tree/main/localKeplr",target:"_blank",rel:"noopener noreferrer"}},[t._v("Keplr chain setup for LocalOsmosis"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Add test account to Keplr\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://help.keplr.app/getting-started/connecting-additional-accounts",target:"_blank",rel:"noopener noreferrer"}},[t._v("Add account via mnemonic in Keplr"),a("OutboundLink")],1),t._v(".\nThe account "),a("code",[t._v("test1")]),t._v(" can be added by copy-pasting "),a("code",[t._v("notice oak worry limit wrap speak medal online prefer cluster roof addict wrist behave treat actual wasp year salad speed social layer crew genius")]),t._v(" to the Import account screen on Keplr. It contains 100,000 test OSMOs.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/osmosis-labs/LocalOsmosis#accounts",target:"_blank",rel:"noopener noreferrer"}},[t._v("List of test accounts and its mnemonics in LocalOsmosis"),a("OutboundLink")],1)])])])]),t._v(" "),a("p",[t._v("Now we are good to go! Let's dive in")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" frontend\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("Then open "),a("code",[t._v("http://localhost:3000/")]),t._v(" in the browser.")]),t._v(" "),a("p",[t._v("In frontend directory, you will see that "),a("code",[t._v(".beaker")]),t._v(" is in here. It is actually symlinked to the one in the root so that frontend code can access beaker state.")]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"license"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#license"}},[t._v("#")]),t._v(" License")]),t._v(" "),a("p",[t._v("The crates in this repository are licensed under either of the following licenses, at your discretion.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("Apache License Version 2.0 (LICENSE-APACHE or apache.org license link)\nMIT license (LICENSE-MIT or opensource.org license link)\n")])])]),a("p",[t._v("Unless you explicitly state otherwise, any contribution submitted for inclusion in this library by you shall be dual licensed as above (as defined in the Apache v2 License), without any additional terms or conditions.")])])}),[],!1,null,null,null);s.default=n.exports}}]);