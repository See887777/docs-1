"use strict";(self.webpackChunkosmosis_docs=self.webpackChunkosmosis_docs||[]).push([[4667],{72729:(t,e,a)=>{a.d(e,{d:()=>i,e:()=>o,f:()=>s});const i=(t,e)=>{const a=e.getTime()-t.getTime();return Math.round(Math.abs(a/1e3/60))},o=(t,e)=>{const a=i(t,e);if(a<2)return"just now";if(a<60)return`${a}m ago`;const o=Math.round(a/60);if(a<90)return`about ${o}h ago`;if(o<24)return`${o}h ago`;const s=Math.round(o/24);if(s<7)return`${s}d ago`;return`${Math.round(s/7)}w ago`},s=t=>t.toDateString()+" "+t.toLocaleTimeString()},4667:(t,e,a)=>{a.r(e),a.d(e,{dyte_chat:()=>l});var i=a(94196),o=a(7147),s=a(72729),r=a(24849),n=a(61070),c=a(58318),d=a(60804);a(55752);const l=class{constructor(t){(0,i.r)(this,t),this.iconPack=o.d,this.t=(0,n.u)(),this.chat=[],this.now=new Date,this.autoScrollEnabled=!1,this.dropzoneActivated=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.emojiPickerEnabled=!1,this.disconnectMeeting=t=>{this.timeout&&clearTimeout(this.timeout),"number"==typeof this.request&&cancelAnimationFrame(this.request),this.chatUpdateListener&&(null==t||t.chat.removeListener("chatUpdate",this.chatUpdateListener))},this.handleKeyDown=t=>{if("Enter"===t.key&&t.shiftKey){this.textArea.clientHeight<200&&(this.textArea.style.height=this.textArea.clientHeight+20+"px")}else"Enter"===t.key?(t.preventDefault(),this.handleSendMessage()):"Backspace"===t.key&&(this.textArea.value.endsWith("\n")?this.textArea.style.height=this.textArea.clientHeight-20+"px":""===this.textArea.value&&(this.textArea.style.height="auto"))},this.toggleEmojiPicker=()=>{this.emojiPickerEnabled=!this.emojiPickerEnabled},this.persistTextMessage=t=>{const e=t.target.value;d.g.setItem("dyte-text-message",e)},this.initialiseTextField=t=>{this.textArea=t;const e=d.g.getItem("dyte-text-message")||"";this.textArea.value=e},this.onEmojiClicked=t=>{this.textArea.value=this.textArea.value+t.detail,this.textArea.focus()},this.onPaste=t=>{const e=t.clipboardData||t.originalEvent.clipboardData;this.handleFilesDataTransfer(e.items)}}connectedCallback(){this.meetingChanged(this.meeting);const t=(0,c.g)();this.autoScrollEnabled=t.autoScroll,this.host.addEventListener("dragover",(t=>{t.preventDefault(),this.dropzoneActivated=!0})),this.host.addEventListener("dragleave",(()=>{this.dropzoneActivated=!1})),this.host.addEventListener("drop",(t=>{t.preventDefault(),this.dropzoneActivated=!1,this.handleFilesDataTransfer(t.dataTransfer.items)}))}componentDidRender(){this.autoScrollEnabled&&(0,r.s)(this.chatEl)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(t,e){if(null!=e&&this.disconnectMeeting(e),null!=t){this.canSend=t.self.permissions.chatPublic.canSend,this.canSendTextMessage=t.self.permissions.chatPublic.text,this.canSendFiles=t.self.permissions.chatPublic.files,this.chat=t.chat.messages.map((t=>({type:"chat",message:t}))),this.chatUpdateListener=({message:t})=>{null!=t&&(this.chat=[...this.chat,{type:"chat",message:t}])};const e=()=>{this.now=new Date,this.timeout=setTimeout((()=>{null!=this.request&&(this.request=requestAnimationFrame(e))}),6e4)};this.request=requestAnimationFrame(e),t.chat.addListener("chatUpdate",this.chatUpdateListener)}}handleSendMessage(){var t;if(!this.canSend||!this.canSendTextMessage)return;const e=this.textArea.value.trim();e.length>0&&(null===(t=this.meeting)||void 0===t||t.chat.sendTextMessage(e),this.textArea.value="",this.textArea.style.height="auto",d.g.setItem("dyte-text-message",""))}uploadFile(t){const e=document.createElement("input");e.type="file","image"===t&&(e.accept="image/*"),e.onchange=e=>{const{validity:a,files:[i]}=e.target;a.valid&&this.sendFile(i,t)},e.click()}handleFilesDataTransfer(t){if(null!=t)for(const e of t)if("file"===e.kind){const t=e.getAsFile();e.type.startsWith("image/")?this.sendFile(t,"image"):this.sendFile(t,"file")}}sendFile(t,e){var a,i;this.canSend&&this.canSendFiles&&("image"===e?null===(a=this.meeting)||void 0===a||a.chat.sendImageMessage(t):null===(i=this.meeting)||void 0===i||i.chat.sendFileMessage(t))}toggleAutoScroll(t){this.autoScrollEnabled=t,(0,c.s)("auto-scroll",t)}render(){let t=null;return(0,i.h)(i.H,null,(0,i.h)("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},(0,i.h)("dyte-icon",{icon:this.iconPack.attach}),(0,i.h)("p",null,this.t("Drop files/images to send"))),(0,i.h)("div",{class:"chat-container scrollbar",ref:t=>this.chatEl=t,part:"container"},(0,i.h)("div",{class:"spacer",part:"spacer"}),(0,i.h)("div",{class:"chat",part:"chat"},this.chat.map((e=>{if("chat"===e.type){const{message:a}=e,o=a.userId===(null==t?void 0:t.userId)&&(0,s.d)(a.time,null==t?void 0:t.time)<2;switch(t=a,a.type){case"text":return(0,i.h)("dyte-text-message",{message:a,now:this.now,isContinued:o});case"image":return(0,i.h)("dyte-image-message",{message:a,now:this.now,isContinued:o,iconPack:this.iconPack});case"file":return(0,i.h)("dyte-file-message",{message:a,now:this.now,isContinued:o,iconPack:this.iconPack})}}})))),this.canSend&&this.canSendTextMessage&&this.emojiPickerEnabled&&(0,i.h)("dyte-emoji-picker",{t:this.t,onDyteEmojiClicked:this.onEmojiClicked,part:"emoji-picker"}),(0,i.h)("form",{class:"chat-input",part:"chat-input"},this.canSend&&this.canSendTextMessage&&(0,i.h)("textarea",{placeholder:"Message..",ref:this.initialiseTextField,onKeyDown:this.handleKeyDown,onInput:this.persistTextMessage,autoFocus:!0,onPaste:this.onPaste,part:"textarea",class:"scrollbar"}),(0,i.h)("div",{class:"chat-buttons",part:"chat-buttons"},(0,i.h)("div",{class:"left",part:"chat-buttons-left"},(0,i.h)("dyte-tooltip",{size:this.size,label:this.t(this.autoScrollEnabled?"Autoscroll enabled":"Autoscroll disabled")},(0,i.h)("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.toggleAutoScroll(!this.autoScrollEnabled),title:this.t(this.autoScrollEnabled?"Autoscroll enabled":"Autoscroll disabled")},(0,i.h)("dyte-icon",{icon:this.autoScrollEnabled?this.iconPack.vertical_scroll:this.iconPack.vertical_scroll_disabled}))),this.canSend&&this.canSendFiles&&[(0,i.h)("dyte-tooltip",{label:this.t("Send a file"),size:this.size},(0,i.h)("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("file"),title:this.t("Send a file")},(0,i.h)("dyte-icon",{icon:this.iconPack.attach}))),(0,i.h)("dyte-tooltip",{label:this.t("Send an image"),size:this.size},(0,i.h)("dyte-button",{variant:"ghost",kind:"icon",onClick:()=>this.uploadFile("image"),title:this.t("Send an image")},(0,i.h)("dyte-icon",{icon:this.iconPack.image})))],this.canSend&&this.canSendTextMessage&&(0,i.h)("dyte-tooltip",{label:this.t("Send Emoji"),size:this.size},(0,i.h)("dyte-button",{variant:"ghost",kind:"icon",class:{active:this.emojiPickerEnabled},title:this.t("Send Emoji"),onClick:this.toggleEmojiPicker},(0,i.h)("dyte-icon",{icon:this.iconPack.emoji_multiple})))),this.canSend&&this.canSendTextMessage&&(0,i.h)("div",{class:"right",part:"chat-buttons-right"},(0,i.h)("dyte-tooltip",{variant:"primary",label:this.t("Send message"),size:this.size,delay:2e3},(0,i.h)("dyte-button",{kind:"icon",onClick:()=>this.handleSendMessage(),title:this.t("Send message")},(0,i.h)("dyte-icon",{icon:this.iconPack.send})))))))}get host(){return(0,i.g)(this)}static get watchers(){return{meeting:["meetingChanged"]}}};l.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}.chat-container{box-sizing:border-box;display:flex;flex-direction:column;padding-top:var(--dyte-space-4, 16px);padding-bottom:var(--dyte-space-4, 16px);flex:1 0 0px;overflow-y:scroll}.chat-container .spacer{flex:1 1 auto}.chat-container .chat{flex:0 0 auto}.chat-input{z-index:10;box-sizing:border-box;display:flex;flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}textarea{box-sizing:border-box;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));padding:var(--dyte-space-3, 12px);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}textarea::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}textarea{outline:2px solid transparent;outline-offset:2px;resize:none;overflow-y:auto;border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);min-height:80px;font-size:14px}.chat-buttons{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.chat-buttons .left dyte-button{margin-right:var(--dyte-space-1, 4px)}.chat-buttons .left dyte-button dyte-icon{height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px)}.chat-buttons>div{display:flex;align-items:center}.file-picker{display:none}.chat *:first-child{margin-top:var(--dyte-space-0, 0px)}.chat .head{display:flex;align-items:center}.chat .head .name{margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.chat .head .time{font-size:12px;color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.chat .body{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);overflow-wrap:break-word;font-size:14px;line-height:1.25rem}.chat .body .emoji{font-size:24px}p{margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-3, 12px)}dyte-text-message,dyte-image-message,dyte-file-message{margin-top:var(--dyte-space-4, 16px);display:block;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));box-sizing:border-box}*[is-continued]{margin-top:var(--dyte-space-3, 12px)}dyte-text-message[is-continued]{margin-top:var(--dyte-space-2, 8px)}.chat .image{position:relative;height:var(--dyte-space-40, 160px);max-width:var(--dyte-space-64, 256px);cursor:pointer}.chat .image img{display:none;height:100%;width:100%;border-radius:var(--dyte-border-radius-sm, 4px);-o-object-fit:cover;object-fit:cover}.chat .image .image-spinner{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}.chat .image .image-spinner dyte-spinner{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-text-opacity))}.chat .image .image-errored{display:flex;height:100%;width:100%;flex-direction:column;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-sm, 4px);background-color:rgba(var(--dyte-colors-danger, 255 45 45) / 0.1);--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}.chat .image .actions{display:none;height:var(--dyte-space-8, 32px);align-items:center;position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));overflow:hidden;--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-none, 0);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.chat .image .actions .action:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.image.loaded img{display:block}.image.loaded .image-spinner{display:none}.image:hover .actions,.image:focus .actions{display:flex}.chat .file{display:flex;align-items:center;padding-left:var(--dyte-space-2, 8px);padding-right:var(--dyte-space-2, 8px);padding-top:var(--dyte-space-1\\.5, 6px);padding-bottom:var(--dyte-space-1\\.5, 6px);border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.chat .file .file-data{flex:1 1 0%}.chat .file .file-data .name{color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.chat .file .file-data .file-data-split{margin-top:var(--dyte-space-0\\.5, 2px);display:flex;align-items:center;font-size:12px}.chat .file .file-data .file-data-split .ext{margin-right:var(--dyte-space-2, 8px);text-transform:uppercase}.chat .file .file-data .file-data-split .divider{height:var(--dyte-space-4, 16px);width:var(--dyte-space-0\\.5, 2px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity))}.chat .file .file-data .file-data-split .size{margin-left:var(--dyte-space-2, 8px)}a{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.3s slide-up ease;animation:0.3s slide-up ease}@-webkit-keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}@keyframes slide-up{from{transform:translateY(100%)}to{transform:translateY(0%)}}dyte-emoji-picker{z-index:0;border-top:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60));-webkit-animation:0.3s slide-up ease;animation:0.3s slide-up ease}"},60804:(t,e,a)=>{a.d(e,{g:()=>s});const i={get:(t,e,a)=>(...i)=>{try{return Reflect.get(t,e,a).apply(t,i)}catch(o){return null}}};let o;try{o=new Proxy(localStorage,i)}catch(r){o=new Proxy({},i)}const s=o},61070:(t,e,a)=>{a.d(e,{g:()=>o,u:()=>s});var i=a(55752);const o=async t=>{if(null==t||"en"===t||""===t.trim())return i.d;try{const e=await fetch(`http://localhost:5000/${t}.json`);return e.ok?Object.assign({},i.d,await e.json()):i.d}catch(e){return i.d}},s=(t=i.d)=>e=>{var a;return null!==(a=t[e])&&void 0!==a?a:e}},24849:(t,e,a)=>{a.d(e,{s:()=>i});const i=t=>{null!=t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}},58318:(t,e,a)=>{a.d(e,{a:()=>r,g:()=>n,s:()=>s});var i=a(60804);const o="dyte-prefs",s=(t,e)=>{const a=JSON.parse(i.g.getItem(o)||"{}");a[t]=JSON.stringify(e),i.g.setItem("dyte-prefs",JSON.stringify(a))},r=t=>JSON.parse(i.g.getItem(o)||"{}")[t],n=()=>{const t=JSON.parse(i.g.getItem(o)||"{}");return{mirrorVideo:!t["mirror-video"]||"true"===t["mirror-video"],muteNotificationSounds:!!t["mute-notification-sounds"]&&"true"===t["mute-notification-sounds"],autoScroll:!t["auto-scroll"]||"true"===t["auto-scroll"]}}}}]);